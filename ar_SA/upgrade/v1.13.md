# الترقية إلى v1.13 من v1.12

### مميزات جديدة مثيرة 🎉

- [Seeding](#seeding)
- [Factories](#factories)
- [Testing](#testing)
- [Views](#views)

## تعزيز 🚀

- [ترقية النسخة الافتراضية للجولانغ إلى 1.20](#upgrade-the-default-version-of-golang-to-1-20)
- [جدولة دعم المهام مقياس أفقي](#schedule-supports-scale-horizontally)
- [إضافة طرق التصحيح](#add-debug-methods)
- [make:controller أمر يضيف المعلمات](#make-controller-command-adds-parameter)
- [إضافة طريقة الحالة للاستجابة](#add-status-method-for-response)
- [أضف طريقة الكم والمؤشر للجزيرة](#add-sum-and-cursor-methods-for-orm)
- [وحدة المسار تدعم مشغل الإعداد](#the-route-module-supports-configure-driver)
- [إضافة طرق InputArray و InputMap للطلب] (#add-inputarray-and-inputmap-methods-for-request)
- [نموذج نظام دعم الاتصال المخصص](#the-model-of-orm-supports-custom-connection)
- [إضافة مشغل سحابي لنظام الملفات](#add-cloudinary-driver-for-filesystem)
- [إضافة طرق سلسلة جديدة للسجل](#add-new-chain-methods-for-log)

### v1.13.4

- [بدء تشغيل الخدمة يدعم المتغيرات البيئية](#the-service-startup-supports-environment-variables)

## كسر التغييرات 🛠️

- [إزالة برنامج HTTP العالمي المتوسط المحمل بشكل افتراضي](#_5-remove-the-global-http-middleware-loaded-by-default)
- [تحسين إرجاع المراقب المالي] (#_6-optimize-the-return-of-controller)
- [تغيير معلمة طريقة المجموعة في facades.Route()](#_7-change-the-parameter-of-the-group-method-in-facades-route)
- [تحسين طريقة تذكر و تذكر الأبد في facades.Cache()(إذا استخدم)]( (#_8-optimize-remember-and-rememberforever-methods-in-facades-cache-if-using)
- [تغيير اسم الحزمة من الوصول.NewAllowResponse و access.NewDenyResponse(إذا استخدم)](#_9-change-the-package-name-of-access-newallowresponse-and-access-newdenyresponse-if-using)
- [إزالة الطرق المهملة(اذا استخدم)](#_10-remove-deprecated-methods-if-using)

### إصلاح الأخطاء 🐛

- [إصلاح واجهات.Auth().User()](#fix-facades-auth-user)
- [إصلاح مسار .env المخصص لا يؤثر في بعض الحالات](#fix-custom-env-path-does-not-take-effect-in-some-cases)
- [إصلاح الرمز المميز ينتهي فوراً عندما يكون ttl =0 هو تعيين في JWT](#fix-token-expires-immediately-when-ttl-0-is-set-in-jwt)

#### v1.13.2

- [إصلاح واجهات.Storage().Url() إرجاع مسار خاطئ تحت Windows](#fix-facades-storage-url-returns-wrong-path-under-windows)
- [إصلاح الاتصال غير الطبيعي عندما تكون كلمة المرور البريدية فارغة](#fix-abnormal-connection-when-the-postgres-password-is-empty)
- [اصلاح الطريقة مع طريقة غير صالحة عند استخدام طريقة مؤشر الأورم](#fix-the-with-method-is-invalid-when-using-the-cursor-method-of-orm)

#### v1.13.4

- [إصلاح وحدة التحقق من التحقق من صحة بارامزات الطريق](#fix-the-validation-module-cant-verify-the-route-params)
- [إصلاح ملف إرجاع سائق الألياف](#fix-the-fiber-driver-cant-return-file)
- [اصلاح البرنامج العالمي لذعر سائق الألياف](#fix-the-global-middleware-of-fiber-driver-panic)
- [إصلاح إعدادات نوع المحتوى لمشغل الألياف مختلفة عن مشغل البنزين](#fix-the-contenttype-setting-of-fiber-driver-is-different-from-gin-driver)

#### v1.13.5

- [إصلاح اتصال النموذج لا يعمل](#fix-the-connection-of-model-does-not-work)
- [إصلاح خطأ في السجل الوهمي](#fix-the-error-of-mock-log)

#### v1.13.6 v1.13.7

- [إصلاح مشكلة تنفيذ سلسلة الاستفسارات بدون خطية](#fix-the-problem-of-nonlinear-execution-of-query-chain)

#### v1.13.8

- [إصلاح مشكلة الوقائع.Auth().Parse()](#fix-the-problem-of-facades-auth-parse)
- [إصلاح مشكلة واجهة الحقائق.Orm().WithContext()](#fix-the-problem-of-facades-orm-withcontext)
- [سجل قائمة الانتظار خاضع للتحكم بواسطة APP_DEBUG](#the-queue-log-is-controlled-by-app-debug)

#### v1.13.9

- [إصلاح مشكلة الطباعة الجديدة للسجل غير صحيحة](#fix-the-problem-of-the-new-line-print-of-log-is-incorrect)
- [إصلاح مشكلة البائع:نشر Commabnd لا يمكن نشر الدليل](#fix-the-problem-of-the-vendor-publish-commabnd-can-not-publish-directory)

### v1.13.10

- [إصلاح المسارات لا يتم تنظيفها عند تسجيل الاتصالات.معلومات بعد تسجيل الدخول.خطأ](#fix-the-traces-do-not-cleaned-when-calling-log-info-after-log-error)
- [إصلاح سمات حدث العتاد الخاص بإرجاع بيانات الأخطاء](#fix-the-getattribute-of-orm-event-returns-error-data)
- [إضافة ToSql, ToRawSql Methods for ORM](#add-tosql-torawsql-methods-for-orm)

## دليل الترقية

الرجاء ترقية الإطار خطوة بخطوة وفقا للمحتوى في هذا القسم.

**الوقت التقديري للترقية: 10 دقائق**

### 1. تحديث التبعيات

تحديث الإعتمادات في ملف 'go.mod':

```
اذهب للحصول على -u github.com/goravel/framework@v1.13.9 & اذهب للحصول على -u github.com/goravel/gin
```

### 2. إضافة ملفات جديدة

[tests](https://github.com/goravel/goravel/tree/v1.13.x/tests)

[قاعدة البيانات/seeders/database_seeder.go](https://github.com/goravel/goravel/tree/v1.13.x/database/seeders/database_seeder.go)

[app/providers/database_service_provider.go](https://github.com/goravel/goravel/tree/v1.13.x/app/providers/database_service_provider.go)

### 3. تسجيل مزودي خدمات جدد

لاحظ الطلب:

```go
استيراد (
  "github.com/goravel/framework/testing"
  "github.com/goravel/gin"


// config/appp. o
"مقدمي الخدمات": []foundation.ServiceProvider{
  ...
  &validation.ServiceProvider{},
  // New
  &testing. erviceprovider{}, 
  &providers.AppServiceProvider{},
  ...
  &provids. alidationServiceprovider{},
  /New
  &providers.DatabaseServiceProvider{}, 
  / New
  &gin.ServiceProvider{}, 
}
```

### 4. إضافة تكوين

تعديل [config/http.go](https://github.com/goravel/goravel/tree/v1.13.x/config/http.go)

```go
import (
  "github.com/goravel/framework/contracts/route"
  "github.com/goravel/framework/facades"
  ginfacades "github.com/goravel/gin/facades"
)

config.Add("http", map[string]any{
  // HTTP Driver
  "default": "gin",
  // HTTP Drivers
  "drivers": map[string]any{
    "gin": map[string]any{
      "route": func() (route.Route, error) {
        return ginfacades.Route("gin"), nil
      },
    },
  },
  ...
}
```

تعديل [config/cors.go](https://github.com/goravel/goravel/tree/v1.13.x/config/cors.go)

```go
config.Add.("cors", map[string]any{
  ...
  // New
  "المسارات": []string{"*"}, 
  "allowed_methods": []string{"*"},
  ...
}
```

### 5. إزالة برنامج HTTP العالمي المتوسط المحمل بشكل افتراضي

1. تم دمج وسيطي `tls` و `cors` في مشغل HTTP الافتراضي، لذلك 'medileware'. ors()`و`medileware.Tls()' في ملف \`app/http/kernel.go' تحتاج إلى إزالتها.

2. طريقة 'facades.Route().GlobalMiddleware(http.Kernel{}.Middleware()...' في ملف
  `app/providers/route_service_provider.go' تنتقل إلى `Boot' من `تسجيل`:

```go
موفري الحزمة

...

اكتب RouteServiceProمزود البنية {


func (مستلم *RouteServiceprovider) تسجيل (مؤسسة التطبيقات. التكرار) {
A}

func (المتلقي *RouteServiceprovider) Boot(مؤسسة التطبيق). التكرار) {
  //Add HTTP medileware
  facades.Route().GlobalMiddleware(http.Kernel{}.Middleware()...)

  مستقبل onfigureRateLimiting()

  routes.Web()


func (المتلقي *RouteServiceProvider) configureRateLimiting() {

}
```

### 6. تحسين إرجاع المراقب المالي

'المراقب يضيف قيمة العائد 'http.Response'، 'ctx.Response()' يمكن أن يعود مباشرة، لا حاجة لاستخدام
'العودة' بشكل منفصل لجعل المنطق أكثر سلاسة.

```go
// Before
func (r *UserController) Show(ctx http.Context) {
  ctx.Response().Success().Json(http.Json{
    "Hello": "Goravel",
  })
  return
}

// After
func (r *UserController) Show(ctx http.Context) http.Response {
  return ctx.Response().Success().Json(http.Json{
    "Hello": "Goravel",
  })
}
```

### 7. تغيير معلمة طريقة المجموعة في facades.Route()

تغيير `route.Route' إلى `route.Router'：

```go
// قبل
facades.Route().Group(func(route.Route)

// after
facades.Route().Group(func(route.Router)
```

### 8. تحسين طريقة تذكر و تذكر الأبدين في facades.Cache()(إذا استخدم)

نوع 'الاستدعاء' يتغير إلى 'func() (any, error)' من 'func() any':

```go
// Before
Remember(key string, ttl time.Duration, callback func() any) (any, error)
RememberForever(key string, callback func() any) (any, error)

// After
Remember(key string, ttl time.Duration, callback func() (any, error)) (any, error)
RememberForever(key string, callback func() (any, error)) (any, error)
```

### 9. تغيير اسم حزمة الوصول.NewAllowResponse و access.NewDenyResponse(إذا استخدم)

تغيير `/contracts/auth/access` إلى `/auth/access`:

```go
// Before
import "github.com/goravel/framework/contracts/auth/access"

access.NewAllowResponse()
access.NewDenyResponse()

// After
import "github.com/goravel/framework/auth/access"

access.NewAllowResponse()
access.NewDenyResponse()
```

### 10. إزالة الطرق المهملة. (إذا استخدم)

1. إزالة طريقتي 'ctx.request().Form()` و 'ctx.request().Json()`، واستخدام طريقة 'ctx.request().Input()' بدلا من ذلك؛

2. إزالة طرق 'GetLevel`، 'GetTime'، 'GetMessage' لـ 'Log' cotom driver، استخدم طرق 'Level`، 'Time'، 'Message'
  عوضا عن ذلك؛

3. إزالة طريقة 'gorm.New' ، يتم استخدام هذه الطريقة للحصول على مثيل 'gorm' مباشرة، لم يعد من الموصى به.
  استخدام طريقة 'gorm.NewGormImpl' بدلا من ذلك، إذا لزم الأمر؛

## مقدمة الوظيفة

### البذور

الإصدار: v1.13.1

[للحصول على التفاصيل](../orm/seeding)

### المصانع

الإصدار: v1.13.1

[للحصول على التفاصيل](../orm/factories)

### اختبار

الإصدار: v1.13.1

[للحصول على التفاصيل](../testing/quickstart)

### المشاهدات

الإصدار: v1.13.1

[للحصول على التفاصيل](../basic/views)

### ترقية النسخة الافتراضية للجولانغ إلى 1.20

الإصدار: v1.13.1

تم وقف العمل بالجولانغ 1.18 و 1.19 وتم ترقية الإطار إلى 1.20
بناء على ذلك، [للحصول على التفاصيل] (https://endoflife.date/go). إذا كنت ترغب في الاستمرار في استخدام 1.18 أو 1.19، فقط تعديل رقم الإصدار
في 'go.mod' ، فهي متوافقة تماما في الوقت الحالي.

### جدولة دعم المهام بشكل أفقي

الإصدار: v1.13.1

[للحصول على التفاصيل](../advanced/schedule#running-tasks-on-one-server)

### إضافة طرق التصحيح

الإصدار: v1.13.1

[للحصول على التفاصيل](../advanced/helpers#debug)

### أمكن:controller الأمر يضيف معلمة

الإصدار: v1.13.1

الأمر 'make:controlller' يضيف معلمة '--resource' ، ويمكن إنشاء CURD بسهولة :

```
ابدأ التشغيل. صنع:controller - متحكم الموارد
```

### إضافة طريقة حالة الاستجابة

الإصدار: v1.13.1

[للحصول على التفاصيل](../basic/responses#custom-code)

### إضافة طرق الكم والمؤشر للعضو

الإصدار: v1.13.1

[للحصول على التفاصيل](../orm/quickstart#facades-orm-query-facades-orm-transaction-available-functions)

### مسار الوحدة النمطية يدعم مشغل تكوين

الإصدار: v1.13.1

فصل مدفع السائق الافتراضي الأصلي لوحدة الطريق إلى حزمة، يمكن حقنه في Goravel عن طريق تكوين
. بعد هذا التحسين، يوفر قناة مناسبة لحقن حزم HTTP أخرى في Goravel,
حاليا حزمتا HTTP مدعومتان رسمياً:

| سائق    | رابط                                                                                                 |
| ------- | ---------------------------------------------------------------------------------------------------- |
| Gin     | [https://github.com/goravel/gin](https://github.com/goravel/gin)     |
| الألياف | [https://github.com/goravel/fiber](https://github.com/goravel/fiber) |

### إضافة طرق InputArray و InputMap لطلب

الإصدار: v1.13.1

[للحصول على التفاصيل](../basic/requests#retrieving-an-input-value)

### نموذج الدعم الأساسي الإتصال المخصص

الإصدار: v1.13.1

[للحصول على التفاصيل](../orm/quickstart#database-connections)

### إضافة مشغل سحابي لنظام الملفات

الإصدار: v1.13.1

[للحصول على التفاصيل](https://github.com/goravel/cloudinary)

### إضافة سلسلة طرق جديدة للسجل

الإصدار: v1.13.1

[للحصول على التفاصيل](../basic/logging#chain-methods)

### إصلاح واجهات.Auth().User()

الإصدار: v1.13.1

1. إصلاح المشكلة التي لا يرمي بها أي خطأ إذا لم يكن المستخدم موجودا عند استخدام طريقة 'facades.Auth().User(ctx, &user)\`

2. إصلاح المشكلة التي يمكن العثور عليها 'user' عندما لا يكون المفتاح الأساسي 'int';

### إصلاح مسار .env المخصص لا يؤثر في بعض الحالات

الإصدار: v1.13.1

إصلاح المشكلة التي لا يكون مسار .env المخصص ساري المفعول في بعض الحالات.

### إصلاح الرمز المميز ينتهي فورا عندما يكون ttl =0 هو تعيين في JWT

الإصدار: v1.13.1

توقع عدم انتهاء الرمز المميز عند `ttl == 0`.

### إصلاح facades.Storage().Url() إرجاع مسار خاطئ تحت Windows

الإصدار: v1.13.2

[المشكلة #263](https://github.com/goravel/goravel/issues/263)

### إصلاح الاتصال غير الطبيعي عندما تكون كلمة المرور البريدية فارغة

الإصدار: v1.13.2

[المشكلة #270](https://github.com/goravel/goravel/issues/270)

### إصلاح الطريقة مع طريقة غير صالحة عند استخدام طريقة مؤشر العتاد

الإصدار: v1.13.2

[المشكلة #253](https://github.com/goravel/goravel/issues/253)

### بدء تشغيل الخدمة يدعم المتغيرات البيئية

الإصدار: v1.13.4

[المشكلة #265](https://github.com/goravel/goravel/issues/265)

### إصلاح وحدة التحقق من التحقق من الطريق

goravel/gin: v1.1.6

goravel/fiber: v1.1.11

[الإصدار #294](https://github.com/goravel/goravel/issues/294)

### إصلاح ملف إرجاع سائق الألياف

goravel/fiber: v1.1.11

[الإصدار #299](https://github.com/goravel/goravel/issues/299)

### إصلاح البرنامج العالمي المتوسط لذعر سائق الألياف

goravel/fiber: v1.1.11

[المشكلة #300](https://github.com/goravel/goravel/issues/300)

### إصلاح إعدادات نوع المحتوى لمشغل الألياف مختلفة عن مشغل البنزين

goravel/fiber: v1.1.11

[الإصدار #296](https://github.com/goravel/goravel/issues/296)

### إصلاح اتصال النموذج لا ينجح

goravel/framework: v1.13.5

[المشكلة #312](https://github.com/goravel/goravel/issues/312)

### إصلاح خطأ في السجل الوهمي

goravel/framework: v1.13.5

[المشكلة #320](https://github.com/goravel/goravel/issues/320)

### إصلاح مشكلة تنفيذ سلسلة الاستفسارات عبر الخط

Goravel/framework: v1.13.6 v1.13.7

[المشكلة #341](https://github.com/goravel/goravel/issues/341)

### إصلاح مشكلة واجهات العقود.Auth().Parse()

goravel/framework: v1.13.8

[المشكلة #388](https://github.com/goravel/goravel/issues/388)

### إصلاح مشكلة واجهات الأورم().WithContext()

goravel/framework: v1.13.8

[المشكلة #390](https://github.com/goravel/goravel/issues/390)

### سجل قائمة الانتظار متحكم به من قبل APP_DEBUG

goravel/framework: v1.13.8

مستويات 'التصحيح' و 'Info' لن تكون مطبوعة عندما 'APP_DEBUG=false'

[المشكلة #389](https://github.com/goravel/goravel/issues/389)

### إصلاح مشكلة الطباعة الجديدة للسجل غير صحيحة

goravel/framework: v1.13.9

[المشكلة #395](https://github.com/goravel/goravel/issues/395)

### إصلاح مشكلة البائع:نشر Commabnd لا يمكن نشر الدليل

goravel/framework: v1.13.9

[المشكلة #345](https://github.com/goravel/goravel/issues/345)

### إصلاح المسارات لا يتم تنظيف عند تسجيل الاتصالات.معلومات بعد تسجيل الدخول.خطأ

goravel/framework: v1.13.10

[المشكلة #402](https://github.com/goravel/goravel/issues/402)

### إصلاح سمات حدث العتاد إرجاع بيانات الأخطاء

goravel/framework: v1.13.10

[المشكلة #405](https://github.com/goravel/goravel/issues/405)

### إضافة ToSql, ToRawSql Methods for ORM

goravel/framework: v1.13.10

[المشكلة #411](https://github.com/goravel/goravel/issues/411)
