# الترقية إلى v1.10 من v1.9

## مميزات جديدة مثيرة 🎉

- [إضافة واجهات.Crypt(1.10.0)](#encryption)
- [إضافة واجهات.هاش(1.10.0)](#hashing)
- [إضافة تحديد معدل للطريقة (1.10.0)](#add-rate-limiting-for-routing)

## تعزيز 🚀

- [الترقية إلى v1.10 من v1.9](#upgrading-to-v110-from-v19)
  - [ميزات جديدة مثيرة 🎉](#exciting-new-features-)
  - [التحسينات 🚀](#enhancements-)
  - [كسر التغييرات 🛠️](#breaking-changes-)
  - [ترقية الدليل](#upgrade-guide)
    - [تحديث التبعيات](#updating-dependencies)
    - [Encryption](#encryption)
    - [Hashing](#hashing)
    - [إضافة تحديد معدل للتوجيه](#add-rate-limiting-for-routing)
    - [تحسين وضع بدء تشغيل HTTP](#optimize-http-startup-mode)
    - [تحسين وضع بدء تشغيل GRPC ](#optimize-grpc-startup-mode)
    - [إضافة تكوين للتحكم في إخراج السجل إلى وحدة التحكم](#add-configuration-to-control-log-output-to-console)
    - [طلب تعديل وإضافة الأساليب] (#request-modify-and-add-methods)
    - [إرسال الدعم في قائمة الانتظار] (#queue-support-delayed-dispatching)
    - [الاتصال في ORM يدعم بادئة الجدول المحددة والمفردة](#the-connection-in-orm-supports-set-table-prefix-and-singular)
    - [إضافة ملف docker-compose.yml](#add-docker-composeyml-file)
    - [تحسين ترتيب](#optimize-orm)
    - [دعم عدة SQL في ملف الهجرة](#support-multiple-sql-in-migration-file)
    - [إضافة مشغل مصغر لتخزين الملفات](#add-minio-driver-for-file-storage)
    - [العقود/(A/AC.26p إضافة تعيين الحالة من net/http](#contractshttp-add-status-mapping-of-nethttp)
    - [APP\_KEY مطلوب](#app_key-required)
    - [إضافة معلمة ctx إلى الأساليب في إطار طلب النموذج](#add-ctx-parameter-to-the-methods-under-form-request)
    - [facades.Auth.Parse إضافة إرجاع الحمولة](#facadesauthparse-add-payload-returns)
    - [بعض طرق "Orm تضيف قيم إرجاع جديدة](#some-methods-of-orm-add-new-return-values)

## كسر التغييرات 🛠️

- [APP_KEY مطلوب(1.10.0)](#app-key-required)
- [إضافة معلمة ctx إلى الأساليب في طلب النموذج (1.10.0)](#add-ctx-parameter-to-the-methods-under-form-request)
- [facades.Auth.Parse يضيف إرجاع الحمولة (1.10.0)](#facades-auth-parse-add-payload-returns)
- [بعض طرق "Orm تضيف قيم إرجاع جديدة" (1.10.0)](#some-methods-of-orm-add-new-return-values)

## دليل الترقية

**الوقت التقديري للترقية: 20 دقيقة**

### تحديث التبعيات

تحديث الإعتمادات في ملف 'go.mod':

```
go get -u github.com/goravel/framework@v1.10.0 && go mod tidy
```

### التشفير

الإصدار: v1.10.0

إضافة `facades.Crypt`:

1. إضافة '&crypt.ServiceProvider{}' إلى عنصر 'providers' في
  ملف [config/app.go](https://github.com/goravel/goravel/blob/v1.10.x/config/app.go)؛

[للحصول على التفاصيل](../security/encryption)

### التجزئة

الإصدار: v1.10.0

إضافة `facades.Hash`:

1. إضافة '&hash.ServiceProvider{}' إلى عنصر 'providers' في
  ملف [config/app.go](https://github.com/goravel/goravel/blob/v1.10.x/config/app.go)؛

2. إضافة ملف [config/hashing.go](https://github.com/goravel/goravel/blob/v1.10.x/config/hashing.go) ؛

[للحصول على التفاصيل](../security/hashing)

### إضافة تحديد معدل للتوجيه

الإصدار: v1.10.0

[للحصول على التفاصيل](../basic/routing#Rate-Limiting)

### تحسين وضع بدء تشغيل HTTP

الإصدار: v1.10.0

1. إضافة تكوين \`config/http.go'، [للحصول على التفاصيل](https://github.com/goravel/goravel/blob/v1.10.x/config/http.go)؛
2. The `facades.Route.Run` method no longer needs to pass parameters, by default use `http.host` and `http.port`(you
  don't need to modify the code, it's backward compatible);
3. لم تعد طريقة `facades.Route.RunTLS` بحاجة إلى تمرير المعلمات، بشكل افتراضي باستخدام `http.tls.host`،
  `{ p. ls.port`, 'http.tls.ssl.cert' و 'http.tls.ssl.key\`, إذا كنت تستخدمه, تحتاج إلى تعديل الكود;
4. إضافة طريقة 'facades.Route.RunTLSShCert'، [للحصول على التفاصيل](../basic/routing#start-server)؛
5. نقل `app.url`، `app.host' إلى `http.url`، `http.host\`؛

### تحسين وضع بدء تشغيل GRPC

الإصدار: v1.10.0

The `facades.Grpc.Run` method no longer needs to pass parameters, by default use `grpc.host` and `grpc.port`(you don't
need to modify the code, it's backward compatible);

### إضافة تكوين للتحكم في إخراج السجل إلى وحدة التحكم

الإصدار: v1.10.0

إضافة تكوين `print` إلى قناة `single`، `daily` في ملف `config/logging.go`، يمكنها التحكم في إخراج السجل إلى وحدة التحكم
، [للحصول على التفاصيل](https://github.com/goravel/goravel/blob/v1.10.x/config/logging.go)؛

### طلب تعديل وإضافة طرق

الإصدار: v1.10.0

1. يتم تغيير طريقة "الإدخال" من الحصول على معلمات التوجيه فقط إلى الحصول على البيانات وفقا للطلب التالي:
  'json`، `form`, `query`, `route`<unk> ملاحظة: `json\` يمكن أن يحصل فقط على بيانات أحادية الأبعاد، وإلا فسيعود فارغاً؛
2. إضافة طريقة 'Route' لاستبدال طريقة 'Input' الأصلية؛
3. القيمة الافتراضية لطريقتي "الاستفسار" و "استمارة الاستفسار" معدلة بحيث تكون غير ضرورية؛
4. تضاف الطرق على النحو المبين أدناه:

| الطريقة    | اجراء                                                                                       |
| ---------- | ------------------------------------------------------------------------------------------- |
| الطريق     | [استرجاع قيمة الطريق](../basic/requests#Retrieving-An-Input-Value)                          |
| روتينت     | [استرجاع قيمة الطريق](../basic/requests#Retrieving-An-Input-Value)                          |
| RouteInt64 | [استرجاع قيمة الطريق](../basic/requests#Retrieving-An-Input-Value)                          |
| QueryInt   | [استرداد الإدخال من نص الاستفسار](../basic/requests#Retrieving-Input-From-The-Query-String) |
| QueryInt64 | [استرداد الإدخال من نص الاستفسار](../basic/requests#Retrieving-Input-From-The-Query-String) |
| QueryBool  | [استرداد الإدخال من نص الاستفسار](../basic/requests#Retrieving-Input-From-The-Query-String) |
| InputInt   | [استرجاع قيمة الإدخال](../basic/requests#Retrieving-An-Input-Value)                         |
| InputInt64 | [استرجاع قيمة الإدخال](../basic/requests#Retrieving-An-Input-Value)                         |
| InputBool  | [استرجاع قيمة الإدخال](../basic/requests#Retrieving-An-Input-Value)                         |
| Json       | [استرجاع Json](../basic/requests#Retrieving-Json)                                           |

### تأخير إرسال الدعم في قائمة الانتظار

الإصدار: v1.10.0

إضافة طريقة \`التأخير'، [للحصول على التفاصيل](../advanced/queues#Delayed-Dispatching)

### الاتصال في ORM يدعم بادئة جدول محددة ومفردة

الإصدار: v1.10.0

1. يدعم 'النموذج' تحديد اسم الجدول، [للحصول على التفاصيل](../orm/quickstart)؛
2. إضافة مفاتيح جديدة إلى `الاتصال` من `config/database.go`:

`prefix`: Set prefix for table name;
`singular`: Set the table name to use singular or plural;

[للحصول على التفاصيل](https://github.com/goravel/goravel/blob/v1.10.x/config/database.go)

### إضافة ملف docker-compose.yml

الإصدار: v1.10.0

يمكنك بدء الخدمة بسرعة مع الأمر التالي:

```
إنشاء docker-- تكوين
docker-تكوين
```

### تحسين النواة

الإصدار: v1.10.0

1. تضاف الطرق التالية:

| الدوال      | اجراء                                                              |
| ----------- | ------------------------------------------------------------------ |
| أولاً أو    | [الاستعلام أو إرجاع البيانات من خلال رد المكالمة](#Query-one-line) |
| أوستورنيو   | [استرجاع أو نماذج جديدة](#Retrieving-Or-Creating-Models)           |
| الفشل الأول | [لم يتم العثور على خطأ](#Not-Found-Error)                          |
| تحديث       | [تحديث أو إنشاء](#Update-or-create)                                |

2. تم الإبلاغ عن خطأ مثل هذا من قبل، ولكن الآن مدعوم:

```go
الاستفسار := facades.Orm.Query()
استفسار = استفسار.Where()
```

### دعم عدة SQL في ملف الترحيل

الإصدار: v1.10.0

سابقاً، كان بيان SQL واحد فقط مدعوماً في ملف الترحيل، ولكن الآن يتم دعم بيانات متعددة.

### إضافة مشغل مصغر لتخزين الملفات

الإصدار: v1.10.0

إضافة تكوين مصغر، [للحصول على التفاصيل](https://github.com/goravel/goravel/blob/v1.10.x/config/filesystems.go).

### العقود/Adp إضافة تعيين حالة لnet/lenp

الإصدار: v1.10.0

يمكنك استخدام رموز الحالة مثل `http.StatusOK` مباشرة في وحدة التحكم دون استيراد `net/http`.

[للحصول على التفاصيل](https://github.com/goravel/framework/blob/v1.10.0/contracts/http/status.go)

### APP_مفتاح مطلوب

الإصدار: v1.10.0

تم تغيير `APP_KEY` في الملف `.env` إلى المطلوب، يمكنك تشغيل الأمر لتوليد APP_KEY:
`انتقل إلى التشغيل. مفتاح حرفي:generate`.

### إضافة معلمة ctx إلى الأساليب تحت طلب النموذج

الإصدار: v1.10.0

إضافة معلمة 'ctx http.Context' إلى الأساليب تحت الطلب النموذجي: 'Rules', `Messages', `Attributes',
\`PrepareForValidation', يتيح لك القيام بالمزيد من الإعدادات المخصصة.

[للحصول على التفاصيل](../basic/validation#creating-form-requests)

### facades.Auth.Parse إضافة إرجاع الحمولة

الإصدار: v1.10.0

'err := facades.Auth.Parse(ctx, token)' تغيير إلى 'payloadad, err := facades.Auth.Parse(ctx, token)`، من خلال 'payload`
يمكنك الحصول على:

1. `الحرس`: الحرس الحالي؛
2. `المفتاح`: علم المستخدم؛
3. `انتهاء صلاحيتها`: وقت انتهاء الصلاحية؛
4. `IssuedAt`: وقت الإصدار؛

[للحصول على التفاصيل](../security/authentication#parse-token)

### بعض طرق Orm تضيف قيم إرجاع جديدة

الإصدار: v1.10.0

الطرق التالية تضيف قيمة العائد '\*نتيجة' للحصول على عدد الصفوف المتأثرة:

```go
res, err := query.Delete(&user)
res, err := query.Exec(fmt.Sprintf("DLETE FROM حيث المعرف = %d", user.ID))
، الخطأ := الاستعلام. orceDelete(&User{})
res, err := query.Updates(User{Avatar: "Avatar"})

// الصفوف المتأثرة
num := res.RowsAffected
```
