# الترقية إلى v1.12 من v1.11

## v1.12.6

### إصلاح الأخطاء 🐛

- [إصلاح مشكلة JWT](#fix-the-problem-of-jwt)

## v1.12.5

### إصلاح الأخطاء 🐛

- [إصلاح مشكلة facades.Orm().Query().Load()]( (#fix-the-problem-of-facades-orm-query-load

## v1.12.4

### إصلاح الأخطاء 🐛

- [مشكلة رمي البرامج المتوسطة الخانقة](#the-problem-of-the-throttle-middleware-throw-panic)

## v1.12.3

### إصلاح الأخطاء 🐛

- [مشكلة الأمور:package Command Under Windows](#the-problem-of-make-package-command-under-windows)

## v1.12.2

### إصلاح الأخطاء 🐛

- [مشكلة واجهات العراق.Gate() عدم عودة](#the-problem-of-facades-gate-return-nil)

## v1.12.1

### إصلاح الأخطاء 🐛

- [مشكلة الذعر الناجمة عن مسار الملف تحت Windows](#the-panic-problem-caused-by-file-path-under-windows)

## v1.12.0

### مميزات جديدة مثيرة 🎉

- [حاوية الخدمة (1.12.0)](#service-container
- [تطوير الحزمة (1.12.0)](#package-development)
- [إضافة وحدة كربون](#add-helpers-methods)

## تعزيز 🚀

- [العلامة الفنية تضيف طرق جديدة](#artisan-flag-adds-new-methods)
- [إضافة طرق المساعدة](#add-helpers-methods)
- [ترقية التبعيات](#upgrade-dependencies)
- [الهجرة تضيف طرق جديدة](#migration-adds-new-methods)
- [بعض الدلائل الفرعية لدعم الأوامر](#some-make-commands-support-subdirectories)

## كسر التغييرات 🛠️

- [تعديل نوع الدعوة من واجهات (1.12.0)](#_3-modify-facades)
- [تحسين العلامة الفنية (1.12.0)](#_6-modify-flag-in-the-artisan-command-if-using)
- [وحدة ملفات النظام تلغي الدعم الافتراضي ل S3, OSS, COS, Minio](#_7-filesystem-module-cancels-default-support-for-s3-oss-cos-minio)
- [وحدة التخزين المؤقت إلغاء الدعم الافتراضي للريديس](#_8-cache-module-cancels-default-support-for-redis)
- [تغيير نوع الإنشاء, تم تحديثه في النموذج](#_9-change-the-type-of-createdat-updatedat-in-model)
- [تحسين نموذج قاعدة المصادقة](#_10-optimize-the-rule-of-validation-module)

## دليل الترقية

الرجاء ترقية الإطار خطوة بخطوة وفقا للمحتوى في هذا القسم.

**الوقت المقدر للترقية: 30 دقيقة**

### 1. تحديث التبعيات

تحديث الإعتمادات في ملف 'go.mod':

```
go get -u github.com/goravel/framework@v1.12.0 && go mod tidy
```

هناك خطأ بعد تشغيل `go mod tidy`، سيتم حل الخطأ بعد تنفيذ خطوات الترقية التالية.

### 2. تعديل `bootstrap/app.go`

```go
// قبل
تطبيق := Foundation.Application{}

// بعد
تطبيق := Foundation.NewApplication()
```

### 3. تعديل الواجهات.\*

| قبل                   | بعد                     |
| --------------------- | ----------------------- |
| `facades.Artisan`     | `facades.Artisan()`     |
| `facades.Auth`        | `facades.Auth()`        |
| `facades.Cache`       | `facades.Cache()`       |
| `facades.Config`      | `facades.Config()`      |
| `facades.Crypt`       | `facades.Crypt()`       |
| `facades.Event`       | `facades.Event()`       |
| `facades.Gate`        | `facades.Gate()`        |
| `facades.Grpc`        | `facades.Grpc()`        |
| `facades.Hash`        | `facades.Hash()`        |
| `facades.Log`         | `facades.Log()`         |
| `facades.Mail`        | `facades.Mail()`        |
| `facades.Orm`         | `facades.Orm()`         |
| `facades.liste`       | `facades.Queue()`       |
| `facades.RateLimiter` | `facades.RateLimiter()` |
| `facades.Route`       | `facades.Route()`       |
| `facades.Schedule`    | `facades.Schedule()`    |
| `facades.Storage`     | `facades.Storage()`     |
| `facades.Validation`  | `facades.Validation()`  |

### 4. تعديل 'app/providers/\*'

إضافة استيراد لجميع الملفات:

```go
استيراد (
  "github.com/goravel/framework/contracts/foundation"
)
```

كل طرق 'التسجيل' و 'Boot' أضف معلمة الإدخال 'Foundation.Application':

```go
مربع (المستلم *AppServiceproviders register(appation.Application) {}

func (المتلقي *AppServiceProvider) Boot(appation.Application) {}
```

### 5. تعديل `app/config/app.go`

تعديل الاستيراد:

```go
// قبل
"github.com/goravel/framework/contracts"

"مقدمي الخدمات": []contracts.ServiceProvider{

// After
"github.com/goravel/framework/contracts/foundation"

"مقدمي الخدمات": []foundation.ServiceProvider{
```

### 6. تعديل العلم في الأمر الفني (إذا استخدم)

العناصر في '[]command.Flag' إضافة نوع '&command.StringFlag':

```go
// Before
func (receiver *VendorPublishCommand) Extend() command.Extend {
  return command.Extend{
    Category: "test",
    Flags: []command.Flag{
      {
        Name: "test",
      },
    },
  }
}

// After
func (receiver *VendorPublishCommand) Extend() command.Extend {
  return command.Extend{
    Category: "test",
    Flags: []command.Flag{
      &command.StringFlag{
        Name: "test",
      },
    },
  }
}
```

### 7. وحدة نظام الملفات إلغاء الدعم الافتراضي ل S3, OSS, COS, Minio

من أجل الحد من تحميل الطرود الثالثة غير الضرورية، وتقليل حجم الطرود، وتحسين كفاءة التجميع،
Goravel سيقوم تدريجيا بتجزئة كل سائق وحدة في حزم توسيع مستقلة. In this upgrade, the
`Filesystem` module cancels the default support for `S3`, `OSS`, `COS`, `Minio` drivers, and transfers support to
independent extension packages.

إزالة المفاتيح في `config/filesystems.go::disks` باستثناء `local` والمحركات التي تستخدم:

```go
// تم تعديل
"أقراص": خريطة[string]أيً{
  "المحلية": الخريطة[string]أي {
    "السائق": "محلي"،
    "الروت": "وحدة التخزين/التطبيق"،
    "url": config. nv("APP_URL", "").(string) + "/storage",
  },
},
```

إذا كنت تستخدم سائقين آخرين تتوقع 'محلية\`، يرجى الرجوع إلى وثائق المشغل المقابلة للتثبيت:

| سائق | رابط                                                                                                 |
| ---- | ---------------------------------------------------------------------------------------------------- |
| S3   | [https://github.com/goravel/s3](https://github.com/goravel/s3)       |
| OSS  | [https://github.com/goravel/oss](https://github.com/goravel/oss)     |
| كوب  | [https://github.com/goravel/cos](https://github.com/goravel/cos)     |
| مصغر | [https://github.com/goravel/minio](https://github.com/goravel/minio) |

### 8. وحدة التخزين المؤقت إلغاء الدعم الافتراضي لRedis

إزالة مفتاح 'redis' في 'config/cache.go::stores' إذا كنت لا تستخدم:

```go
// معدلة
"متاجر": خريطة[string]أيً{
  "memory": map[string]any{
    "السائق": "memory",
  },
},
```

إذا كنت تستخدم مشغل 'redis' ، يرجى الرجوع إلى وثائق مشغل 'redis' للتثبيت:

| سائق  | رابط                                                                                                 |
| ----- | ---------------------------------------------------------------------------------------------------- |
| ريديس | [https://github.com/goravel/redis](https://github.com/goravel/redis) |

### 9. تغيير نوع الإنشاء, تحديث في الموديل (إذا استخدم)

من أجل جعل نوع الوقت أكثر قياسا في إخراج API، نوع 'إنشاء'. 'تحديث' في 'Model' التغيير إلى
'carbon.DateTime' من 'time.Time'. إذا كان لديك معالجة إضافية لهذين الحقلين، يمكنك الحصول على نوع
'time.Time' الأصلي من خلال طريقة 'CreatedAt.ToStdTime()'.

### 10. تحسين قاعدة التحقق من الوحدة (إذا استخدم)

تحقق من القيمة الصفر في قاعدة التحقق الأصلية ، على سبيل المثال ، إذا تم تعيين القاعدة إلى "التاريخ" و "المطلوب" لم يتم تعيينها.
والحقل فارغ أو لم يتم اجتيازه، ستدفع وحدة التحقق هذا الحقل مطلوب. بعد التحسين، سيتم اجتياز وحدة التحقق
الفحص، وهو أكثر بديهًا لاستخدامه. إذا كنت تستخدم التحقق ذي الصلة، الرجاء
التأكد من أن الترقية كما هو متوقع.

### 11. تثبيت الإعتمادات مرة أخرى

تشغيل `go mod tidy`

## مقدمة الوظيفة

### حاوية الخدمة

الإصدار: v1.12.0

جميع الخدمات في Goravel مسجلة في حاوية الخدمة، مما يوفر دعما قويا للحزمة
التطوير، [للحصول على التفاصيل](../foundation/container)

### تطوير الحزمة

الإصدار: v1.12.0

الحزم هي الطريقة الأساسية لإضافة وظيفة إلى جورافل، يمكن أن تثري إيكولوجيا
Goravel, [للحصول على التفاصيل](../advanced/package)

### العلم الفني يضيف طرق جديدة

الإصدار: v1.12.0

إضافة طرق للوحدة الحرفية للحصول على أنواع مختلفة من
`العلامة`، [للتفاصيل](../advanced/artisan#options)

### إضافة طرق المساعدين

الإصدار: v1.12.0

أضف أساليب المساعدين `path` و`Carbon` ، يمكنك بسهولة الحصول على معلومات المسار والتعامل مع الوقت في مشروع
، [للحصول على التفاصيل](../advanced/helpers)[

### ترقية التبعيات

الإصدار: v1.12.0

لتوفير دعم أفضل للميزات، تم ترقية إصدارات جميع الحزم التي يعتمد عليها جورفل.

### الهجرة تضيف طرق جديدة

الإصدار: v1.12.0

| الأوامر                           | اجراء                                        |
| --------------------------------- | -------------------------------------------- |
| ترجمة:fresh       | إسقاط جميع الجداول وإعادة تشغيل جميع الهجرات |
| ترجمة:التحديث     | إعادة تعيين وإعادة تشغيل جميع الهجرات        |
| ترجمة:إعادة تعيين | رجوع جميع عمليات ترحيل قاعدة البيانات        |
| الهجرة: الحالة    | إظهار حالة كل عملية هجرة                     |

### بعض الدلائل الفرعية لدعم الأوامر 'make'

الإصدار: v1.12.0

| 命令                                                     | 生成文件                                                                              |
| ------------------------------------------------------ | --------------------------------------------------------------------------------- |
| صنع:السياسة المستخدم/مصادقة السياسة    | app/policies/User/auth_policy.go             |
| make:command Goravel/CleanCache        | تطبيق/console/commands/Goravel/Cle_cache.go  |
| صنع:نموذج المستخدم/الهاتف              | app/models/user/phone.go                                          |
| تك:مراقب المستخدم/مراقب الهاتف         | تطبيق/مراقبين/مستخدم/هاتفون_المراقب                          |
| صنع:الحدث المستخدم/أورافيلي الحدث      | تطبيق/الأحداث/المستخدم/goravel_event.go      |
| make:listener User/GoravelListten      | تطبيق/مستمعون/مستخدم/goravel_listen.go       |
| صنع:controller المستخدم/مراقب المصادقة | app/http/controllers/User/auth_controller.go |
| صنع:medileware مستخدم/مصادقة           | تطبيق/http/medileware/User/auth.go                                |
| إجراء :request المستخدم/المصادقة       | تطبيق/http/requests/User/auth.go                                  |
| صنع:job Goravel/Job                    | app/jobs/Goravel/job.go                                           |
| صنع:قاعدة المستخدم/الهاتف              | app/rules/User/phone.go                                           |

### مشكلة الذعر التي يسببها مسار الملف تحت Windows

الإصدار: v1.12.1

إصلاح مشكلة الذعر الناجمة عن الظهر عندما ينشئ الأمر "صنع" تلقائياً مجلدات تحت Windows.

### مشكلة واجهات العراق.بوابة( العودة صفر

الإصدار: v1.12.2

إصلاح مشكلة 'facades.Gate()' العودة لا شيء.

### مشكلة الأمور:package الأوامر تحت نظام ويندوز

الإصدار: v1.12.3

الملف الذي تم إنشاؤه بواسطة الأمر `make:package` له مسار خاطئ تحت Windows.

### مشكلة البرامج المتوسطة الخانقة في رمي الذعر

الإصدار: v1.12.4

إصلاح مشكلة رمي الخانق الوسط بالذعر.

### إصلاح مشكلة facades.Orm().Query().Load()

الإصدار: v1.12.5

إصلاح المشكلة التي لا يمكن أن تقوم `facades.Orm().Query().Load()` بتحميل النموذج بشكل صحيح في بعض الحالات.

### إصلاح مشكلة JWT

الإصدار: v1.12.6

إصلاح المشكلة التي عندما تنتهي صلاحية رمز JWT و غير صالح، يتم إرجاع خطأ انتهاء الصلاحية، ومن المتوقع أن يتم إرجاع الخطأ
أولاً.
