# Aggiornamento a v1.12 da v1.11

## v1.12.6

### Bug Fixes üêõ

- [Risolvere Il Problema Di Jwt](#fix-the-problem-of-jwt)

## v1.12.5

### Bug Fixes üêõ

- [Risolvere Il Problema Di Facades.Orm().Query().Load()](#fix-the-problem-of-facades-orm-query-load)

## v1.12.4

### Bug Fixes üêõ

- [Il Problema Del Throttle Middleware Throw Panic](#the-problem-of-the-throttle-middleware-throw-panic)

## v1.12.3

### Bug Fixes üêõ

- [Il problema di make:package Command Under Windows](#the-problem-of-make-package-command-under-windows)

## v1.12.2

### Bug Fixes üêõ

- [Il problema di facades.Gate() Restituisce nil](#the-problem-of-facades-gate-return-nil)

## v1.12.1

### Bug Fixes üêõ

- [Il Problema Di Panico Causato Dal Percorso File Sotto Windows](#the-panic-problem-caused-by-file-path-under-windows)

## v1.12.0

### Nuove Funzionalit√† Emozionanti :Party_popper:

- [Contenitore Di Servizio(1.12.0)](#service-container)
- [Sviluppo Pacchetto(1.12.0)](#package-development)
- [Aggiungi Modulo Carbonio](#add-helpers-methods)

## Miglioramenti :Razzo:

- [Bandiera Artigiana Aggiunge Nuovi Metodi](#artisan-flag-adds-new-methods)
- [Aggiungi Metodi Aiutanti](#add-helpers-methods)
- [Aggiorna Dipendenze](#upgrade-dependencies)
- [Migrazione Aggiunge Nuovi Metodi](#migration-adds-new-methods)
- [Alcune sottodirectory di supporto per i comandi `make`](#some-make-commands-support-subdirectories)

## Breaking Changes üõ†Ô∏è

- [Modificare Il Tipo Di Chiamata Di Facades(1.12.0)](#_3-modify-facades)
- [Ottimizza Bandiera Artigianale(1.12.0)](#_6-modify-flag-in-the-artisan-command-if-using)
- [Modulo Filesystem Annulla il supporto predefinito per S3, OSS, COS, Minio](#_7-filesystem-module-cancels-default-support-for-s3-oss-cos-minio)
- [Modulo Cache annulla il supporto predefinito per la riduzione](#_8-cache-module-cancels-default-support-for-redis)
- [Cambia Il Tipo Di CreatedAt, Aggiornato Nel Modello](#_9-change-the-type-of-createdat-updatedat-in-model)
- [Ottimizza La Regola Di Convalida Modulo](#_10-optimize-the-rule-of-validation-module)

## Upgrade Guide

Please upgrade the framework step by step according to the content in this section.

**Tempo Di Aggiornamento Stimato: 30 Minuti**

### 1. Updating Dependencies

Aggiorna le dipendenze nel file `go.mod`:

```
go get -u github.com/goravel/framework@v1.12.0 && go mod tidy
```

C'√® un errore dopo aver eseguito `go mod tidy`, l'errore verr√† risolto dopo aver eseguito i seguenti passaggi di aggiornamento.

### 2. Modifica `bootstrap/app.go`

```go
// Prima di
app := foundation.Application{}

// Dopo
app := foundation.NewApplication()
```

### 3. Modificare le facciate

| Prima                 | Dopo                    |
| --------------------- | ----------------------- |
| `facades.Artisan`     | `facades.Artisan()`     |
| `facades.Auth`        | `facades.Auth()`        |
| `facades.Cache`       | `facades.Cache()`       |
| `facades.Config`      | `facades.Config()`      |
| `facades.Crypt`       | `facades.Crypt()`       |
| `facades.Event`       | `facades.Event()`       |
| `facades.Gate`        | `facades.Gate()`        |
| `facades.Grpc`        | `facades.Grpc()`        |
| `facades.Hash`        | `facades.Hash()`        |
| `facades.Log`         | `facades.Log()`         |
| `facades.Mail`        | `facades.Mail()`        |
| `facades.Orm`         | `facades.Orm()`         |
| `facades.Queue`       | `facades.Queue()`       |
| `facades.RateLimiter` | `facades.RateLimiter()` |
| `facades.Route`       | `facades.Route()`       |
| `facades.Schedule`    | `facades.Schedule()`    |
| `facades.Storage`     | `facades.Storage()`     |
| `facades.Validation`  | `facades.Validation()`  |

### 4. Modifica `app/providers/*`

Aggiungi importazione per tutti i file:

```go
import (
  "github.com/goravel/framework/contracts/foundation"
)
```

Tutti i metodi `Register`, `Boot` Aggiungi `app foundation.Application` parametro di input:

```go
func (receiver *AppServiceProvider) Register(app foundation.Application) {}

func (receiver *AppServiceProvider) Boot(app foundation.Application) {}
```

### 5. Modifica `app/config/app.go`

Modifica importazione:

```go
// Prima di
"github.com/goravel/framework/contracts"

"providers": []contracts.ServiceProvider{

// Dopo
"github.com/goravel/framework/contracts/foundation"

"providers": []foundation.ServiceProvider{
```

### 6. Modifica contrassegno nel comando artigianale (se si utilizza)

Gli elementi nel tipo `[]command.Flag` aggiungono `&command.StringFlag`:

```go
// Prima del comando
func (receiver *VendorPublishCommand) Extend(). xtend {
  return command.Extend{
    Categoria: "test",
    Flags: []command. lag{
      {
        Name: "test",
      },
    },
  }
}

// Dopo il comando
func (destinatario *VendorPublishCommand) Extend(). xtend {
  return comando. xtend{
    Categoria: "test",
    Flags: []command.Flag{
      &command. tringFlag{
        Nome: "test",
      },
    },
  }
}
```

### 7. Modulo Di Filesystem Annulla il supporto predefinito per S3, OSS, COS, Minio

Al fine di ridurre il carico di pacchetti terzi inutili, ridurre il volume dei pacchetti e migliorare l'efficienza della compilazione
Goravel gradualmente spoglier√† ogni driver di modulo in un pacchetto di espansione indipendente. In questo aggiornamento, il modulo `Filesystem`
annulla il supporto predefinito per i driver `S3`, `OSS`, `COS`, `Minio` e trasferisce il supporto ai pacchetti di estensione indipendenti
.

Rimuove le chiavi in `config/filesystems.go::disks` tranne `local` e driver che utilizzano:

```go
// Modified
"disks": map[string]any{
  "local": map[string]any{
    "driver": "local",
    "root": "storage/app",
    "url": config. nv("APP_URL", "").(stringa) + "/storage",
  },
},
```

Se si utilizzano altri driver si aspettano `local`, si prega di fare riferimento alla documentazione corrispondente del driver per l'installazione:

| Driver | Link                                                                                                 |
| ------ | ---------------------------------------------------------------------------------------------------- |
| S3     | [https://github.com/goravel/s3](https://github.com/goravel/s3)       |
| OSS    | [https://github.com/goravel/oss](https://github.com/goravel/oss)     |
| COS    | [https://github.com/goravel/cos](https://github.com/goravel/cos)     |
| Minio  | [https://github.com/goravel/minio](https://github.com/goravel/minio) |

### 8. Il Modulo Cache Annulla Il Supporto Predefinito Per Redis

Rimuovi la chiave `redis` in `config/cache.go::stores` se non lo stai usando:

```go
// Modified
"stores": map[string]any{
  "memory": map[string]any{
    "driver": "memory",
  },
},
```

Se stai usando il driver `redis`, fai riferimento alla documentazione del driver `redis` per l'installazione:

| Driver | Link                                                                                                 |
| ------ | ---------------------------------------------------------------------------------------------------- |
| Redis  | [https://github.com/goravel/redis](https://github.com/goravel/redis) |

### 9. Cambia Il Tipo Di CreatedAt, Aggiornato Nel Modello(Se si utilizza)

Per rendere l'ora pi√π standard nell'output API, il tipo di `CreatedAt`, `UpdatedAt` in `Model` cambia in
`carbon.DateTime` da `time.Time`. Se hai ulteriori elaborazioni per questi due campi, puoi ottenere il tipo originale
`time.Time` attraverso il metodo `CreatedAt.ToStdTime()`.

### 10. Ottimizza Il Modulo Di Convalida Regola (se si usa)

Controlla il valore zero nella regola di convalida originale, per esempio, se la regola √® impostata su `date` e `required` non √® impostata,
e il campo √® vuoto o non passato, il modulo di convalida chieder√† che il campo √® obbligatorio. Dopo l'ottimizzazione, il modulo di convalida
passer√† il controllo, che √® pi√π intuitivo da usare. If you are using relevant validation, please
ensure that the upgrade is as expected.

### 11. Installa nuovamente le dipendenze

Esegui `go mod tidy`

## Introduzione Funzione

### Contenitore Di Servizio

Versione: v1.12.0

Tutti i servizi in Goravel sono registrati nel contenitore del servizio, fornendo un forte supporto per lo sviluppo del pacchetto
[For Detail](../foundation/container)

### Sviluppo Pacchetto

Versione: v1.12.0

I pacchetti sono il modo principale di aggiungere funzionalit√† a Goravel, pu√≤ arricchire l'ecologia di
Goravel, [Per Dettaglio](../advanced/package)

### Bandiera Artigiana Aggiunge Nuovi Metodi

Versione: v1.12.0

Aggiungi metodi per il modulo Artigiano per ottenere diversi tipi di
`Flag`, [For Detail](../advanced/artisan#options)

### Aggiungi Metodi Aiutanti

Versione: v1.12.0

Aggiungi metodi `path` e `carbon` Helpers, puoi facilmente ottenere le informazioni sul percorso e gestire il tempo nel progetto
, [Per Dettaglio](../advanced/helpers)<unk>

### Aggiorna Dipendenze

Versione: v1.12.0

Per fornire un migliore supporto di funzionalit√†, le versioni di tutti i pacchetti su cui Goravel dipende sono state aggiornate.

### Migrazione Aggiunge Nuovi Metodi

Versione: v1.12.0

| Comandi                          | Azione                                                             |
| -------------------------------- | ------------------------------------------------------------------ |
| migrato:fresco   | Trascina tutte le tabelle ed esegue nuovamente tutte le migrazioni |
| migrato:refresh  | Ripristina e ripristina tutte le migrazioni                        |
| migrato:reset    | Ripristina tutte le migrazioni del database                        |
| migrazione:stato | Mostra lo stato di ogni migrazione                                 |

### Alcuni Comandi `make` Supporta Sottocartelle

Versione: v1.12.0

| ÂëΩ‰ª§                                                    | ÁîüÊàêÊñá‰ª∂                                                                              |
| ----------------------------------------------------- | --------------------------------------------------------------------------------- |
| make:policy User/AuthPolicy           | app/policies/User/auth_policy.go             |
| make:command Goravel/CleanCache       | app/console/commands/Goravel/clean_cache.go  |
| make:model Utente/Telefono            | app/models/User/phone.go                                          |
| make:osservatore Utente/PhoneObserver | app/osservatori/Utente/phone_observer.go     |
| make:Event User/GoravelEvent          | app/events/User/goravel_event.go             |
| make:listener User/GoravelListen      | app/listeners/User/goravel_listen.go         |
| make:controller Utente/AuthController | app/http/controllers/User/auth_controller.go |
| make:middleware User/Auth             | app/http/middleware/User/auth.go                                  |
| make:request Utente/Auth              | app/http/requests/User/auth.go                                    |
| make:job Goravel/Job                  | app/jobs/Goravel/job                                                              |
| make:rule Utente/Telefono             | app/rules/User/phone.go                                           |

### Il Problema Di Panico Causato Per Percorso File Sotto Windows

Versione: v1.12.1

Risolve il problema del panico causato dalla barra rovesciata quando il comando `make` crea automaticamente cartelle sotto Windows.

### Il problema di facades.Gate() Restituisce nil

Versione: v1.12.2

Risolvi il problema di `facades.Gate()` ritorno nil.

### Il problema di make:package Comando Sotto Windows

Versione: v1.12.3

Il file creato dal comando `make:package` ha un percorso sbagliato in Windows.

### Il Problema Del Throttle Middleware Throw Panic

Versione: v1.12.4

Risolvere il problema del gas middleware lanciare il panico.

### Risolvere Il Problema Di Facades.Orm().Query().Load()

Versione: v1.12.5

Risolvere il problema che `facades.Orm().Query().Load()` non pu√≤ caricare correttamente il modello in alcuni casi.

### Risolvere Il Problema Della Jwt

Versione: v1.12.6

Risolvere il problema che quando il token JWT √® scaduto e non √® valido, l'errore di scadenza viene restituito, e si prevede che l'errore
non valido venga restituito prima.
