# Aggiornamento a v1.13 da v1.12

### Nuove Funzionalit√† Emozionanti :Party_popper:

- [Seeding](#seeding)
- [Factories](#factories)
- [Testing](#testing)
- [Views](#views)

## Miglioramenti :Razzo:

- [Aggiorna La Versione Predefinita Di Golang A 1.20](#upgrade-the-default-version-of-golang-to-1-20)
- [Tabella Delle Attivit√† Supporta Scala Orizzontalmente](#schedule-supports-scale-horizontally)
- [Aggiungi Metodi Di Debug ](#add-debug-methods)
- [make:controller Command Aggiunge Parameter](#make-controller-command-adds-parameter)
- [Aggiungi Metodo Di Stato Per La Risposta](#add-status-method-for-response)
- [Aggiungi la somma e i metodi del cursore per l'orm](#add-sum-and-cursor-methods-for-orm)
- [Il Modulo Route Supporta Configura Driver](#the-route-module-supports-configure-driver)
- [Aggiungi Metodi InputArray E Inputmap Per La Richiesta](#add-inputarray-and-inputmap-methods-for-request)
- [Il Modello Di Orm Supporta La Connessione Personalizzata](#the-model-of-orm-supports-custom-connection)
- [Aggiungi Driver Cloudinario Per Il Filesystem](#add-cloudinary-driver-for-filesystem)
- [Aggiungi Nuova Catena Metodi Per Il Log](#add-new-chain-methods-for-log)

### v1.13.4

- [The Service Startup Supporta Variabili Di Ambiente](#the-service-startup-supports-environment-variables)

## Breaking Changes üõ†Ô∏è

- [Rimuovere Il Middleware Globale Htp Caricato Da Predefinito](#_5-remove-the-global-http-middleware-loaded-by-default)
- [Ottimizza il ritorno del controllore](#_6-optimize-the-return-of-controller)
- [Cambia Il Parametro Del Metodo Di Gruppo In facades.Route()](#_7-change-the-parameter-of-the-group-method-in-facades-route)
- [Ottimizza Ricorda E RicordaMetodi Sempre Nelle facades.Cache()(If using)](#_8-optimize-remember-and-rememberforever-methods-in-facades-cache-if-using)
- [Cambia il nome del pacchetto di accesso.NewAllowResponse e access.NewDenyResponse(If using)](#_9-change-the-package-name-of-access-newallowresponse-and-access-newdenyresponse-if-using)
- [Rimuovere I Metodi Deprecati (se si utilizza)](#_10-remove-deprecated-methods-if-using)

### Correzioni Bug üêõ

- [Fix facades.Auth().User()](#fix-facades-auth-user)
- [Fix Custom .env Path does Not Take Effect In Some Cases](#fix-custom-env-path-does-not-take-effect-in-some-cases)
- [Fix Token Scade Subito Quando ttl == 0 √à Impostato In Jwt](#fix-token-expires-immediately-when-ttl-0-is-set-in-jwt)

#### v1.13.2

- [Fix facades.Storage().Url() Restituisce Percorso sbagliato Sotto Windows](#fix-facades-storage-url-returns-wrong-path-under-windows)
- [Correggi Connessione Annuale Quando La Password Postgres √à Vuota](#fix-abnormal-connection-when-the-postgres-password-is-empty)
- [Fissare Il Metodo Con Non √à Valido Quando Si Usano Il Metodo Cursore Dell'Orm](#fix-the-with-method-is-invalid-when-using-the-cursor-method-of-orm)

#### v1.13.4

- [Fix The Validation Module Cant Verifica The Route Params](#fix-the-validation-module-cant-verify-the-route-params)
- [Fix The Fiber Driver Cant Return File](#fix-the-fiber-driver-cant-return-file)
- [Fissare Il Middleware Globale Del Panico Del Driver Fibra](#fix-the-global-middleware-of-fiber-driver-panic)
- [Fix The ContentType Setting of Fiber Driver Is Different from Gin Driver](#fix-the-contenttype-setting-of-fiber-driver-is-different-from-gin-driver)

#### v1.13.5

- [Fissare La Connessione Del Modello Non Funziona](#fix-the-connection-of-model-does-not-work)
- [Correggi L'Errore Del Mock Log](#fix-the-error-of-mock-log)

#### v1.13.6 v1.13.7

- [Risolvere Il Problema Di Esecuzione Non Lineare Della Query Chain](#fix-the-problem-of-nonlinear-execution-of-query-chain)

#### v1.13.8

- [Risolvere Il Problema Di facades.Auth().Parse()](#fix-the-problem-of-facades-auth-parse)
- [Risolvere il problema delle facades.Orm().WithContext()](#fix-the-problem-of-facades-orm-withcontext)
- [Il Registro Della Coda √à Controllato Da App_DeBUg](#the-queue-log-is-controlled-by-app-debug)

#### v1.13.9

- [Risolvere Il Problema Della Nuova Linea Stampa Dei Log Non √à Corretta](#fix-the-problem-of-the-new-line-print-of-log-is-incorrect)
- [Risolvere Il Problema del venditore:Pubblicare Commabnd Can Not Publish Directory](#fix-the-problem-of-the-vendor-publish-commabnd-can-not-publish-directory)

### v1.13.10

- [Correggere Le Tracce Non Pulite Quando Chiamare Log.Info Dopo Log.Error](#fix-the-traces-do-not-cleaned-when-calling-log-info-after-log-error)
- [Correggi Il GetAttribute Of Orm Event Restituisce I Dati Di Errore](#fix-the-getattribute-of-orm-event-returns-error-data)
- [Add ToSql, ToRawSql Methods For ORM](#add-tosql-torawsql-methods-for-orm)

## Aggiorna Guida

Si prega di aggiornare il framework passo dopo passo in base al contenuto di questa sezione.

**Tempo Di Aggiornamento Stimato: 10 Minuti**

### 1. Aggiornamento Dipendenze

Aggiorna le dipendenze nel file `go.mod`:

```
go get -u github.com/goravel/framework@v1.13.9 && go get -u github.com/goravel/gin
```

### 2. Aggiungi Nuovi File

[tests](https://github.com/goravel/goravel/tree/v1.13.x/tests)

[database/seeders/database_seeder.go](https://github.com/goravel/goravel/tree/v1.13.x/database/seeders/database_seeder.go)

[app/providers/database_service_provider.go](https://github.com/goravel/goravel/tree/v1.13.x/app/providers/database_service_provider.go)

### 3. Registra Nuovi Fornitori

Nota l'ordine:

```go
import (
  "github.com/goravel/framework/testing"
  "github.com/goravel/gin"
)

// config/app. o
"providers": []foundation.ServiceProvider{
  ...
  &validation.ServiceProvider{},
  // New
  &testing. erviceProvider{}, 
  &providers.AppServiceProvider{},
  ...
  &providers. alidationServiceProvider{},
  // New
  &providers.DatabaseServiceProvider{}, 
  // New
  &gin.ServiceProvider{}, 
}
```

### 4. Aggiungi Configurazione

Modifica [config/http.go](https://github.com/goravel/goravel/tree/v1.13.x/config/http.go)

```go
import (
  "github.com/goravel/framework/contracts/route"
  "github.com/goravel/framework/facades"
  ginfacades "github.com/goravel/gin/facades"
)

config. dd("http", map[string]any{
  // HTTP Driver
  "default": "gin",
  // HTTP Drivers
  "drivers": map[string]any{
    "gin": map[string]any{
      "route": func() (route. oute, error) {
        return ginfacades. oute("gin"), nil
      },
    },
  },
  . .
}
```

Modifica [config/cors.go](https://github.com/goravel/goravel/tree/v1.13.x/config/cors.go)

```go
config.Add("cors", map[string]any{
  ...
  // New
  "paths": []string{"*"}, 
  "allowed_methods": []string{"*"},
  ...
}
```

### 5. Rimuovere L'HTTP Globale Middleware Caricato Per Predefinito

1. Il middleware `tls` e `cors` √® stato integrato nel driver HTTP predefinito, quindi `middleware. ors()` e
  `middleware.Tls()` nel file `app/http/kernel.go` devono essere rimossi.

2. Il metodo `facades.Route().GlobalMiddleware(http.Kernel{}.Middleware()...)` nel file
  `app/providers/route_service_provider.go` si sposta in `Boot` da `Register`:

```go
package provider

...

type RouteServiceProvider struct {
}

func (receiver *RouteServiceProvider) Register(app foundation. pplication) {
}

func (receiver *RouteServiceProvider) Boot(app foundation. pplication) {
  //Add HTTP middleware
  facades.Route().GlobalMiddleware(http.Kernel{}.Middleware()...)

  receiver. onfigureRateLimiting()

  routes.Web()
}

func (receiver *RouteServiceProvider) configureRateLimiting() {

}
```

### 6. Ottimizza il ritorno del regolatore

`Controller` aggiunge il valore di ritorno `http.Response`, `ctx.Response()` pu√≤ essere restituito direttamente, non c'√® bisogno di usare
`return` separatamente per rendere la logica pi√π liscia.

```go
// Before
func (r *UserController) Show(ctx http.Context) {
  ctx.Response().Success().Json(http. son{
    "Hello": "Goravel",
  })
  restituisce
}

// Dopo
func (r *UserController) Show(ctx http. ontext) http.Response {
  return ctx.Response().Success().Json(http.Json{
    "Hello": "Goravel",
  })
}
```

### 7. Cambia Il Parametro Del Metodo Di Gruppo In facades.Route()

Cambia `route.Route` in `route.Router`Ôºö

```go
// Prima di
facades.Route().Group(func(route route.Route)

// Dopo
facades.Route().Group(func(route route.Router)
```

### 8. Ottimizzare Ricorda E Ricorda Per Sempre Metodi In faccia.Cache()(Se si utilizza)

Il tipo di `callback` cambia in `func() (any, error)` da `func() any`:

```go
// Prima di
ricorda(stringa chiave, tempo ttl. uration, callback func() any) (any, error)
RememberForever(key string, callback func() any) (any, error)

// Dopo
Remember(key string, ttl time. uration, callback func() (any, error)) (any, error)
RememberForever(key string, callback func() (any, error)) (any, error)
```

### 9. Modificare il nome del pacchetto di accesso.NewAllowResponse e access.NewDenyResponse(Se si utilizza)

Cambia `/contracts/auth/access` in `/auth/access`:

```go
// Prima di
import "github.com/goravel/framework/contracts/auth/access"

access.NewAllowResponse()
access.NewDenyResponse()

// Dopo
import "github.com/goravel/framework/auth/access"

access.NewAllowResponse()
access.NewDenyResponse()
```

### 10. Rimuovere Metodi Deprecati (se si utilizza)

1. Rimuovi i metodi `ctx.Request().Form()` e `ctx.Request().Json()`, usa invece il metodo `ctx.Request().Input()`;

2. Rimuovere `GetLevel`, `GetTime`, `GetMessage` metodi di `Log` driver personalizzato, utilizzare `Level`, `Time`, `Message` metodi
  invece;

3. Rimuovere il metodo `gorm.New`, il metodo viene utilizzato per ottenere direttamente l'istanza `gorm`, non √® pi√π raccomandato.
  se necessario, utilizzare invece il metodo `gorm.NewGormImpl`;

## Introduzione Funzione

### Semina

Versione: v1.13.1

[Per Dettaglio](../orm/seeding)

### Fabbriche

Versione: v1.13.1

[Per Dettaglio](../orm/factories)

### Test

Versione: v1.13.1

[Per Dettaglio](../testing/quickstart)

### Viste

Versione: v1.13.1

[Per Dettaglio](../basic/views)

### Aggiorna La Versione Predefinita Di Golang A 1.20

Versione: v1.13.1

Golang 1.18 e 1.19 sono stati interrotti e il framework √® stato aggiornato a 1.20
di conseguenza, [per maggiori dettagli](https://endoflife.date/go). Se si desidera continuare a usare 1.18 o 1.19, √® sufficiente modificare il numero di versione
in `go.mod`, sono attualmente pienamente compatibili.

### Pianificazione Attivit√† Supporta Scala Orizzontalmente

Versione: v1.13.1

[Per Dettaglio](../advanced/schedule#running-tasks-on-one-server)

### Aggiungi metodi di debug

Versione: v1.13.1

[Per Dettaglio](../advanced/helpers#debug)

### make:Controllore Comando Aggiunge Parametro

Versione: v1.13.1

Il comando `make:controller` aggiunge il parametro `--resource`, la struttura CURD pu√≤ essere creata facilmente:

```
go run . artisan make:controller --resource UserController
```

### Aggiungi metodo di stato per la risposta

Versione: v1.13.1

[Per Dettaglio](../basic/responses#custom-code)

### Aggiungi i metodi Somma e Cursore per Orm

Versione: v1.13.1

[Per Dettaglio](../orm/quickstart#facades-orm-query-facades-orm-transaction-available-functions)

### Il Modulo Di Percorso Supporta Configura Il Driver

Versione: v1.13.1

Separare il driver predefinito originale Gin del modulo Route in un pacchetto, pu√≤ essere iniettato in Goravel dalla configurazione
. dopo questa ottimizzazione, i fornitori di un canale conveniente per iniettare altri pacchetti HTTP in Goravel,
attualmente due pacchetti HTTP sono ufficialmente supportati:

| Driver | Link                                                                                                 |
| ------ | ---------------------------------------------------------------------------------------------------- |
| Gin    | [https://github.com/goravel/gin](https://github.com/goravel/gin)     |
| Fibra  | [https://github.com/goravel/fiber](https://github.com/goravel/fiber) |

### Aggiungi Metodi InputArray E Inputmap Per Richiesta

Versione: v1.13.1

[Per Dettaglio](../basic/requests#retrieving-an-input-value)

### Il Modello Di Orm Supporta La Connessione Personalizzata

Versione: v1.13.1

[Per Dettaglio](../orm/quickstart#database-connections)

### Aggiungi Driver Cloudinario Per Il Filesystem

Versione: v1.13.1

[Per Dettaglio](https://github.com/goravel/cloudinary)

### Aggiungi Nuovi Metodi Catena Per Log

Versione: v1.13.1

[Per Dettaglio](../basic/logging#chain-methods)

### Correggi facades.Auth().User()

Versione: v1.13.1

1. Risolve il problema che nessun errore lancia se l'utente non esisteva quando si utilizza il metodo `facades.Auth().User(ctx, &user)`
  .

2. Risolve il problema che `user` pu√≤ essere trovato quando la chiave primaria non √® `int`;

### Correggi Il Percorso .env Personalizzato Non Effettua In Alcuni Casi

Versione: v1.13.1

Risolvere il problema che il percorso .env personalizzato non ha effetto in alcuni casi.

### Correzione Token Scade Immediatamente Quando ttl == 0 √à Impostato In Jwt

Versione: v1.13.1

Aspettatevi che il token non scada mai quando `ttl == 0`.

### Fix facades.Storage().Url() Restituisce Percorso Errato Sotto Windows

Versione: v1.13.2

[Emissione #263](https://github.com/goravel/goravel/issues/263)

### Correggi Connessione Annuale Quando La Password Postgres √à Vuota

Versione: v1.13.2

[Emissione #270](https://github.com/goravel/goravel/issues/270)

### Fissare Il Metodo Con Non √à Valido Quando Si Usano Il Metodo Cursore Di Orm

Versione: v1.13.2

[Emissione #253](https://github.com/goravel/goravel/issues/253)

### Il Servizio Startup Supporta Le Variabili Di Ambiente

Versione: v1.13.4

[Emissione #265](https://github.com/goravel/goravel/issues/265)

### Correggi Il Cant Del Modulo Di Convalida Verifica I Parametri Di Percorso

goravel/gin: v1.1.6

goravel/fiber: v1.1.11

[Emissione #294](https://github.com/goravel/goravel/issues/294)

### Fissare Il File Di Restituzione Del Cant Del Driver Fibra

goravel/fiber: v1.1.11

[Emissione #299](https://github.com/goravel/goravel/issues/299)

### Fissare Il Middleware Globale Del Panico Del Driver In Fibra

goravel/fiber: v1.1.11

[Emissione #300](https://github.com/goravel/goravel/issues/300)

### Fissare Il ContentType Impostazione Del Driver In Fibra √à Differente Dal Driver Di Gin

goravel/fiber: v1.1.11

[Emissione #296](https://github.com/goravel/goravel/issues/296)

### Fissare Il Collegamento Del Modello Non Funziona

goravel/framework: v1.13.5

[Emissione #312](https://github.com/goravel/goravel/issues/312)

### Correggi L'Errore Del Registro Di Mock

goravel/framework: v1.13.5

[Emissione #320](https://github.com/goravel/goravel/issues/320)

### Risolvere Il Problema Di Esecuzione Non Lineare Della Catena Di Query

goravel/framework: v1.13.6 v1.13.7

[Emissione #341](https://github.com/goravel/goravel/issues/341)

### Risolvere Il Problema Di facades.Auth().Parse()

goravel/framework: v1.13.8

[Emissione #388](https://github.com/goravel/goravel/issues/388)

### Risolvere il problema di facades.Orm().WithContext()

goravel/framework: v1.13.8

[Emissione #390](https://github.com/goravel/goravel/issues/390)

### Il Registro Delle Coda √à Controllato Da App_Debug

goravel/framework: v1.13.8

I livelli `Debug` e `Info` non saranno stampati quando `APP_DEBUG=false`

[Emissione #389](https://github.com/goravel/goravel/issues/389)

### Risolvere Il Problema Della Nuova Linea Stampa Del Registro Non √à Corretto

goravel/framework: v1.13.9

[Emissione #395](https://github.com/goravel/goravel/issues/395)

### Risolvere Il Problema Del Venditore:Pubblicare Commabnd Non Pu√≤ Pubblicare Directory

goravel/framework: v1.13.9

[Emissione #345](https://github.com/goravel/goravel/issues/345)

### Fissare Le Tracce Non Pulite Quando Chiamate Log.Info Dopo Log.Errore

goravel/framework: v1.13.10

[Emissione #402](https://github.com/goravel/goravel/issues/402)

### Correggi I Dati Di Errore GetAttributo Dell'Evento Orm

goravel/framework: v1.13.10

[Emissione #405](https://github.com/goravel/goravel/issues/405)

### Aggiungi ToSql, Metodi ToRawSql Per L'Orm

goravel/framework: v1.13.10

[Emissione #411](https://github.com/goravel/goravel/issues/411)
