# Mise √† jour vers la v1.12 √† partir de la v1.11

## v1.12.6

### Corrections de bugs üêõ

- [R√©soudre le probl√®me de JWT](#fix-the-problem-of-jwt)

## v1.12.5

### Corrections de bugs üêõ

- [Corriger le probl√®me des facades.Orm().Query().Load()](#fix-the-problem-of-facades-orm-query-load)

## v1.12.4

### Corrections de bugs üêõ

- [Le probl√®me du Throttle Middleware Throw Panic](#the-problem-of-the-throttle-middleware-throw-panic)

## v1.12.3

### Corrections de bugs üêõ

- [Le probl√®me de make:package Command under Windows](#the-problem-of-make-package-command-under-windows)

## v1.12.2

### Corrections de bugs üêõ

- [Le probl√®me des facades.Gate() retourne nil](#the-problem-of-facades-gate-return-nil)

## v1.12.1

### Corrections de bugs üêõ

- [Le probl√®me de panique caus√© par le chemin de fichier sous Windows](#the-panic-problem-caused-by-file-path-under-windows)

## v1.12.0

### Nouvelles fonctionnalit√©s int√©ressantes üéâ

- [Conteneur du service (1.12.0)](#service-container)
- [D√©veloppement du paquet (1.12.0)](#package-development)
- (#add-helpers-methods)

## Am√©liorations üöÄ

- [Drapeau Artisan Ajoute de nouvelles m√©thodes] (#artisan-flag-adds-new-methods)
- [Ajouter des m√©thodes d'aide] (#add-helpers-methods)
- (#upgrade-dependencies)
- [La migration ajoute de nouvelles m√©thodes](#migration-adds-new-methods)
- [Quelques commandes `make` supportent les sous-r√©pertoires](#some-make-commands-support-subdirectories)

## Changements en cours :hammer_and_wclch:

- [Modifier le type d'appel des facades(1.12.0)](#_3-modify-facades)
- [Optimiser le drapeau de l'Artisan (1.12.0)](#_6-modify-flag-in-the-artisan-command-if-using)
- [Module de syst√®me de fichiers annule la prise en charge par d√©faut pour S3, OSS, COS, Minio](#_7-filesystem-module-cancels-default-support-for-s3-oss-cos-minio)
- [Module de cache annule la prise en charge par d√©faut pour la refonte](#_8-cache-module-cancels-default-support-for-redis)
- [Changer le type de cr√©ationAt, mis √† jour dans le mod√®le](#_9-change-the-type-of-createdat-updatedat-in-model)
- [Optimiser le module de validation de r√®gles](#_10-optimize-the-rule-of-validation-module)

## Guide de mise √† jour

Veuillez mettre √† jour le framework √©tape par √©tape en fonction du contenu de cette section.

**Temps d'am√©lioration estim√© : 30 minutes**

### 1. Mise √† jour des d√©pendances

Mettre √† jour les d√©pendances dans le fichier `go.mod` :

```
go get -u github.com/goravel/framework@v1.12.0 && go mod tidy
```

Il y a une erreur apr√®s avoir ex√©cut√© `go mod tidy`, l'erreur sera r√©solue apr√®s avoir effectu√© les √©tapes suivantes de mise √† jour.

### 2. Modifier `bootstrap/app.go`

```go
// Avant
app := foundation.Application{}

// Apr√®s
app := foundation.NewApplication()
```

### 3. Modifier les facades.\*

| Avant                 | Apr√®s                   |
| --------------------- | ----------------------- |
| `facades.Artisan`     | `facades.Artisan()`     |
| `facades.Auth`        | `facades.Auth()`        |
| `facades.Cache`       | `facades.Cache()`       |
| `facades.Config`      | `facades.Config()`      |
| `facades.Crypt`       | `facades.Crypt()`       |
| `facades.Event`       | `facades.Event()`       |
| `facades.Gate`        | `facades.Gate()`        |
| `facades.Grpc`        | `facades.Grpc()`        |
| `facades.Hash`        | `facades.Hash()`        |
| `facades.Log`         | `facades.Log()`         |
| `facades.Mail`        | `facades.Mail()`        |
| `facades.Orm`         | `facades.Orm()`         |
| `facades.Queue`       | `facades.Queue()`       |
| `facades.RateLimiter` | `facades.RateLimiter()` |
| `facades.Route`       | `facades.Route()`       |
| `facades.Schedule`    | `facades.Schedule()`    |
| `facades.Storage`     | `facades.Storage()`     |
| `facades.Validation`  | `facades.Validation()`  |

### 4. Modifier `app/providers/*`

Ajouter l'importation pour tous les fichiers:

```go
import (
  "github.com/goravel/framework/contracts/foundation"
)
```

Toutes les m√©thodes `Register`, `Boot` Ajoutent le param√®tre d'entr√©e `app foundation.Application`:

```go
func (r√©cepteur *AppServiceProvider) Register(app foundation.Application) {}

func (receiver *AppServiceProvider) Boot(app foundation.Application) {}
```

### 5. Modifier `app/config/app.go`

Modifier l'import :

```go
// Avant
"github.com/goravel/framework/contracts"

"providers": []contracts.ServiceProvider{

// Apr√®s
"github.com/goravel/framework/contracts/foundation"

"providers": []foundation.ServiceProvider{
```

### 6. Modifier le drapeau dans la commande Artisan (si utilis√©)

Les √©l√©ments du type `[]command.Flag` add `&command.StringFlag` :

```go
// Avant
func (receiver *VendorPublishCommand) Extend() . xtend {
  return command.Extend{
    Cat√©gorie: "test",
    Flags: []command. lag{
      {
        Nom: "test",
      },
    },
  }
}

// Apr√®s
fonction (r√©cepteur *VendorPublishCommand) Extend() . xtend {
  commande retourne. xtend{
    Category: "test",
    Flags: []command.Flag{
      &command. tringFlag{
        Nom: "test",
      },
    },
  }
}
```

### 7. Module du syst√®me de fichiers annule la prise en charge par d√©faut pour S3, OSS, COS, Minio

In order to reduce the loading of unnecessary third packages, reduce package volume, and improve compilation efficiency,
Goravel will gradually strip each module driver into an independent expansion packages. In this upgrade, the
`Filesystem` module cancels the default support for `S3`, `OSS`, `COS`, `Minio` drivers, and transfers support to
independent extension packages.

Supprime les cl√©s dans `config/filesystems.go::disks` sauf `local` et les pilotes qui utilisent :

```go
//
"disks": map[string]any{
  "local": map[string]any{
    "driver": "local",
    "root": "storage/app",
    "url": config. nv("APP_URL", "").(string) + "/storage",
  },
},
```

Si vous utilisez d'autres pilotes s'attendent √† `local`, veuillez vous r√©f√©rer √† la documentation correspondante du pilote pour l'installation:

| Chauffeur | Lier                                                                                                    |
| --------- | ------------------------------------------------------------------------------------------------------- |
| S3        | [https://github.com/goravel/s3](https://github.com/fr/goravel/s3)       |
| OSS       | [https://github.com/goravel/oss](https://github.com/fr/goravel/oss)     |
| COS       | [https://github.com/goravel/cos](https://github.com/fr/goravel/cos)     |
| Minio     | [https://github.com/goravel/minio](https://github.com/fr/goravel/minio) |

### 8. Cache Module annule la prise en charge par d√©faut des Redis

Supprimez la cl√© `redis` dans `config/cache.go::stores` si vous ne l'utilisez pas :

```go
//
"stores": map[string]any{
  "memory": map[string]any{
    "driver": "memory",
  },
},
```

Si vous utilisez le pilote `redis`, veuillez vous r√©f√©rer √† la documentation du pilote `redis` pour l'installation:

| Chauffeur | Lier                                                                                                    |
| --------- | ------------------------------------------------------------------------------------------------------- |
| Redis     | [https://github.com/goravel/redis](https://github.com/fr/goravel/redis) |

### 9. Changer le type de cr√©ationAt, mis √† jour dans le mod√®le (si utilis√©)

Afin de rendre le temps plus standard dans la sortie de l'API, le type de `CreatedAt`, `UpdatedAt` dans `Model` passer √†
`carbon.DateTime` de `time.Time`. Si vous avez un traitement suppl√©mentaire pour ces deux champs, vous pouvez obtenir le type original
`time.Time` via la m√©thode `CreatedAt.ToStdTime()`.

### 10. Optimiser la r√®gle de validation du module (si utilis√©)

V√©rifiez la valeur z√©ro dans la r√®gle de validation originale, par exemple, si la r√®gle est d√©finie √† `date` et que `required` n'est pas d√©finie,
et le champ est vide ou non pass√©, le module de validation demandera que le champ soit obligatoire. Apr√®s optimisation, le module de validation
passera la v√©rification, qui est plus intuitive √† utiliser. Si vous utilisez la validation appropri√©e, veuillez
vous assurer que la mise √† niveau est comme pr√©vu.

### 11. Installer √† nouveau les d√©pendances

Ex√©cutez `go mod tidy`

## Introduction √† la fonction

### Conteneur de service

Version : v1.12.0

Tous les services √† Goravel sont enregistr√©s dans le conteneur de service, fournissant un support fort pour le d√©veloppement du paquet
, [Pour D√©tail](../foundation/container)

### D√©veloppement du paquet

Version : v1.12.0

Les paquets sont le principal moyen d'ajouter des fonctionnalit√©s √† Goravel, peuvent enrichir l'√©cologie de
Goravel, [For Detail](../advanced/package)

### Drapeau Artisan ajoute de nouvelles m√©thodes

Version : v1.12.0

Ajouter des m√©thodes pour le module Artisan pour obtenir diff√©rents types de
`Flag`, [For Detail](../advanced/artisan#options)

### Ajouter des m√©thodes d'aide

Version : v1.12.0

Ajoute les m√©thodes `path` et `carbon` Helpers, tu peux facilement obtenir les informations sur le chemin et traiter avec le temps dans le projet
, [For Detail](../advanced/helpers)‚Äª

### Mettre √† niveau les d√©pendances

Version : v1.12.0

Pour fournir une meilleure prise en charge des fonctionnalit√©s, les versions de tous les paquets dont d√©pend Goravel ont √©t√© mises √† jour.

### Migration ajoute de nouvelles m√©thodes

Version : v1.12.0

| Commandes                         | Action                                                        |
| --------------------------------- | ------------------------------------------------------------- |
| migrer:nouveau    | Supprimer toutes les tables et relancer toutes les migrations |
| migrer:actualiser | R√©initialiser et r√©-ex√©cuter toutes les migrations            |
| migrer:reset      | Restaurer toutes les migrations de base de donn√©es            |
| migrer:status     | Afficher le statut de chaque migration                        |

### Quelques commandes `make` prennent en charge les sous-r√©pertoires

Version : v1.12.0

| ÂëΩ‰ª§                                                                        | ÁîüÊàêÊñá‰ª∂                                                                                   |
| ------------------------------------------------------------------------- | -------------------------------------------------------------------------------------- |
| make:policy Utilisateur/AuthPolicy                        | app/policies/User/auth_policy.go                  |
| make:command Goravel/CleanCache                           | app/console/commandes/Goravel/clean_cache.go      |
| make:model Utilisateur/T√©l√©phone                          | app/models/Utilisateur/t√©l√©phone.go                                    |
| make:observateur Utilisateur/PhoneObserver                | App/Observateur/Utilisateur/t√©l√©phone_observer.go |
| make:event Utilisateur/GoravelEvent                       | app/events/User/goravel_event.go                  |
| make:listener Utilisateur/GoravelListen                   | app/listeners/User/goravel_listen.go              |
| make:contr√¥leur Utilisateur/Contr√¥leur d'authentification | app/http/controllers/User/auth_controller.go      |
| make:User/Auth middleware                                 | app/http/middleware/User/auth.go                                       |
| make:request Utilisateur/Auth                             | app/http/requests/User/auth.go                                         |
| faire:job Goravel/Job                                     | app/jobs/Goravel/job.go                                                |
| make:rule Utilisateur/T√©l√©phone                           | app/rules/User/phone.go                                                |

### Le probl√®me de panique caus√© par un chemin de fichier sous Windows

Version : v1.12.1

Corrige le probl√®me de panique caus√© par l'antislash lorsque la commande `make` cr√©e automatiquement des dossiers sous Windows.

### Le probl√®me des facades.Gate() ne retourne aucun

Version : v1.12.2

Corrige le probl√®me de `facades.Gate()` retourne nil.

### Le probl√®me de make:package Command sous Windows

Version : v1.12.3

Le fichier cr√©√© par la commande `make:package` a un mauvais chemin sous Windows.

### Le probl√®me du probl√®me du Throttle Middleware Throw Panic

Version : v1.12.4

Corrige le probl√®me de l'acc√©l√©rateur de lancer panique.

### Corrige le probl√®me des facades.Orm().Query().Load()

Version : v1.12.5

Corrige le probl√®me que `facades.Orm().Query().Load()` ne peut pas charger le mod√®le correctement dans certains cas.

### Corriger le probl√®me de JWT

Version : v1.12.6

Fix the problem that when the JWT Token is expired and invalid, the expiration error is returned, and the invalid error
is expected to be returned first.
