# Mise √† niveau vers la v1.8 de la v1.7

## Nouvelles fonctionnalit√©s int√©ressantes üéâ

- [Ajouter une association de mod√®les pour Orm(1.8.0)](#add-model-association-for-orm)

## Am√©liorations üöÄ

- [Ajouter des m√©thodes pour la requ√™te(1.8.0)](#add-methods-for-request)
- [Ajouter des m√©thodes pour la r√©ponse (1.8.0)](#add-methods-for-response)
- [Optimiser la migration de la base de donn√©es (1.8.0)](#optimize-database-migrate)
- [La route prend en charge HTTPS(1.8.3)](#route-supports-https)

## Changements en cours :hammer_and_wclch:

- [Optimiser l'ordre d'importation (1.8.0)](#optimize-import-order)
- [mock.Validator change de nom (1.8.0)](#mock-validator-change-Name)
- [support.Mysql change de nom (1.8.0)](#support-mysql-change-name)
- [database.NewGormInstance est sur le point d'√™tre d√©pr√©ci√©(1.8.0)](#database-newgorminstance-is-about-to-be-deprecated)

## Corrections de bugs üêõ

- [Corriger le probl√®me de s√©curit√© en m√™me temps Orm (1.8.1)](#fix-orm-concurrency-safety-issue)
- [Fix Mail module cannot send mail by 25 and 465 ports(1.8.2)](#fix-mail-module-can-t-send-mail-by-25-and-465-ports)

## Guide de mise √† jour

**Temps d'am√©lioration estim√© : 1 minute**

### Mise √† jour des d√©pendances

Mettre √† jour les d√©pendances dans le fichier `go.mod` :

```
aller chercher -u github.com/goravel/framework@v1.8.3
```

### Ajouter une association de mod√®les pour Orm

Version : v1.8.0

Ajouter des m√©thodes pour Orm, pour g√©rer l'association de mod√®les:

| M√©thode             | Action                                                                                                              |
| ------------------- | ------------------------------------------------------------------------------------------------------------------- |
| Association         | [Association](../orm/relationships#querying-associations)                                                           |
| BD                  | [Interface de base de donn√©es g√©n√©rique sql.DB](../orm/quickstart#generic-database-interface-sqldb) |
| Charger             | [Chargement p√©nible de l'impatience](../orm/relationships#lazy-eager-loading)                                       |
| Chargement manquant | [Chargement h√¢tif lact√© (non existant)](../orm/relationships#lazy-eager-loading)                 |
| Omettre             | [Omettre les associations](../orm/relationships#create-or-update-associations)                                      |
| Avec                | [Chargement de l'impatience](../orm/relationships#Eager-Loading)                                                    |

### Ajouter des m√©thodes pour la requ√™te

Version : v1.8.0

Ajoute des m√©thodes pour `ctx.Request()`, pour enrichir le format des param√®tres `Query` :

| M√©thode      | Action                                                                                          |
| ------------ | ----------------------------------------------------------------------------------------------- |
| `QueryArray` | [R√©cup√©rer les param√®tres du tableau](../basic/requests#Retrieving-Input-From-The-Query-String) |
| `QueryMap`   | [Obtenir les param√®tres de la carte](../basic/requests#Retrieving-Input-From-The-Query-String)  |

### M√©thodes d'ajout pour r√©ponse

Version : v1.8.0

Ajoutez la m√©thode `Origin` √† `ctx.Response()`, vous pouvez obtenir toutes les informations de `Response` dans le middleware HTTP.

[Detail](../basic/responses#Get-Response)

### Optimiser l'ordre d'importation

Version : v1.8.0

L'ordre d'importation dans le fichier `bootstrap/app.go` change √† :

```go
bootstrap

import (
  "github.com/goravel/framework/foundation"

  "goravel/config"
)
```

[Le Fichier](https://github.com/goravel/goravel/blob/v1.8.0/bootstrap/app.go)

### Optimiser la migration de la base de donn√©es

Version : v1.8.0

Ex√©cutez la commande qui g√©n√®re le fichier de migration: `go run . artisan make:migration create_users_table`, le fichier de migration
correspondant sera g√©n√©r√© en fonction du pilote de base de donn√©es par d√©faut actuellement utilis√© (
`facades.Config.GetString("database.default")`).

### mock.Validator Changer le nom

Version : v1.8.0

Si vous utilisez `mock.Validator` pour √©crire des tests unitaires, les modifications suivantes sont requises :

```
import "github.com/goravel/framework/testing/mock"

mock.Validator

// Modifie vers

import "github.com/goravel/framework/testing/mock"

mock.Validation
```

[Detail](../testing/mocks)

### support.Mysql Changer de nom

Version : v1.8.0

Si vous utilisez des constantes de framework telles que `support.Mysql` pour juger le pilote de base de donn√©es, vous devez faire les modifications
suivantes :

```go
import "github.com/goravel/framework/database/support"

support.Mysql
support.Postgresql
support.Sqlite
support.Sqlserver

// Modifie vers

import "github.com/goravel/framework/contracts/database/orm"

orm.Mysql
orm.Postgresql
orm.Sqlite
orm.Sqlserver
```

Les nouvelles constantes telles que `orm.Mysql` sont de type `orm.Driver` et peuvent √™tre converties en un type de cha√Æne en utilisant la m√©thode
`orm.Mysql.String()`.

### NewGormInstance est sur le point d'√™tre obsol√®te

Version : v1.8.0

La m√©thode `database.NewGormInstance` sera d√©pr√©ci√©e dans la v1.9. , il peut √™tre utilis√© dans la version actuelle, si vous
utilisez la m√©thode pour r√©cup√©rer l'instance `gorm`, les modifications suivantes sont requises:

```go
import "github.com/goravel/framework/database"

gorm, err := database.NewGormInstance(connection)

// Modifie en

import "github.com/goravel/framework/database/gorm"

gorm, err := gorm.New(connection)
```

### Corriger le probl√®me de s√©curit√© en m√™me temps Orm

Version : v1.8.1

Lorsque l'acc√®s simultan√© est √©lev√©, la lecture de `facades.Orm` pour la premi√®re fois peut retourner nil.

### Corriger le module Mail ne peut pas envoyer de courrier par 25 et 465 ports

Version : v1.8.2

Vous pouvez envoyer du courrier par 25, 465, 587 ports maintenant.

### La route prend en charge HTTPS

Version : v1.8.3

`facades.Route` Ajoute la m√©thode `RunTLS`,support start HTTPS
server, [For Detail](../basic/routing#start-https-server).
