# Upgrade auf v1.13 von v1.12

### Spannende neue Features üéâ

- [Seeding](#seeding)
- [Factories](#factories)
- [Testing](#testing)
- [Views](#views)

## Verbesserungen :Rakete:

- [Upgrade die Standardversion von Golang auf 1.20](#upgrade-the-default-version-of-golang-to-1-20)
- [Aufgabenplanung unterst√ºtzt Horizontale Skalierung](#schedule-supports-scale-horizontally)
- [Debug-Methoden hinzuf√ºgen](#add-debug-methods)
- [make:controller Befehl f√ºgt Parameter hinzu](#make-controller-command-adds-parameter)
- [Statusmethode f√ºr Antwort hinzuf√ºgen](#add-status-method-for-response)
- [Summen und Cursor Methoden f√ºr Orm](#add-sum-and-cursor-methods-for-orm)
- [Das Routenmodul unterst√ºtzt Konfigurieren Treiber](#the-route-module-supports-configure-driver)
- [InputArray und InputMap Methoden zur Anfrage hinzuf√ºgen](#add-inputarray-and-inputmap-methods-for-request)
- [Das Modell der Orm unterst√ºtzt benutzerdefinierte Verbindung](#the-model-of-orm-supports-custom-connection)
- [Cloud-Treiber f√ºr Dateisystem hinzuf√ºgen](#add-cloudinary-driver-for-filesystem)
- [Neue Kettenmethode f√ºr Log](#add-new-chain-methods-for-log)

### v1.13.4

- [Der Service Startup unterst√ºtzt Umgebungsvariablen](#the-service-startup-supports-environment-variables)

## √Ñnderungen durchbrechen üõ†Ô∏è

- [Entferne die globale HTTP-Middleware von Standardeinstellung geladen](#_5-remove-the-global-http-middleware-loaded-by-default)
- [Die R√ºckkehr des Kontrollers optimieren](#_6-optimize-the-return-of-controller)
- [Parameter der Gruppenmethode √§ndern in facades.Route()](#_7-change-the-parameter-of-the-group-method-in-facades-route)
- [Denken Sie daran und denken Sie daran, Forever Methoden in facades.Cache()(Wenn using)](#_8-optimize-remember-and-rememberforever-methods-in-facades-cache-if-using)
- [Paketname des access.NewAllowResponse √§ndern und access.NewDenyResponse(If using)](#_9-change-the-package-name-of-access-newallowresponse-and-access-newdenyresponse-if-using)
- [Veraltete Methoden entfernen(falls benutzt)](#_10-remove-deprecated-methods-if-using)

### Fehlerbehebungen üêõ

- [Fassaden reparieren.Auth().Benutzer()](#fix-facades-auth-user)
- [Benutzerdefinierter .env-Pfad behebt in manchen F√§llen keine Wirkung](#fix-custom-env-path-does-not-take-effect-in-some-cases)
- [Token beheben l√§uft sofort ab wenn ttl == 0 ist in JWT](#fix-token-expires-immediately-when-ttl-0-is-set-in-jwt)

#### v1.13.2

- [Fassaden.Storage().Url() gibt unter Windows falschen Pfad zur√ºck](#fix-facades-storage-url-returns-wrong-path-under-windows)
- [Abnorme Verbindung reparieren, wenn das Postgres Passwort leer ist](#fix-abnormal-connection-when-the-postgres-password-is-empty)
- [Die mit der Methode beheben ist ung√ºltig bei der Verwendung der Cursor-Methode des Orm](#fix-the-with-method-is-invalid-when-using-the-cursor-method-of-orm)

#### v1.13.4

- [Fix das Validierungsmodul Cant Verify the Route Params](#fix-the-validation-module-cant-verify-the-route-params)
- [Fix the Fiber Driver Cant Retour-Datei](#fix-the-fiber-driver-cant-return-file)
- [Repariere die globale Middleware des Fiber-Treiber-Panik](#fix-the-global-middleware-of-fiber-driver-panic)
- [Bearbeite die Inhaltstype-Einstellung des Fasertreibers ist anders als Gin Treiber](#fix-the-contenttype-setting-of-fiber-driver-is-different-from-gin-driver)

#### v1.13.5

- [Fix die Verbindung des Modells funktioniert nicht](#fix-the-connection-of-model-does-not-work)
- [Beheben Sie den Fehler des Mock-Log](#fix-the-error-of-mock-log)

#### v1.13.6 v1.13.7

- [Behebt das Problem der nichtlinearen Ausf√ºhrung der Abfragekette](#fix-the-problem-of-nonlinear-execution-of-query-chain)

#### v1.13.8

- [Fix the problem of facades.Auth().Parse()](#fix-the-problem-of-facades-auth-parse)
- [Fix the problem of facades.Orm().WithContext()](#fix-the-problem-of-facades-orm-withcontext)
- [Das Warteschlangenprotokoll wird von APP_DEBUG](#the-queue-log-is-controlled-by-app-debug)

#### v1.13.9

- [Das Problem des Ausdrucks der neuen Zeile des Logbuchs beheben ist falsch](#fix-the-problem-of-the-new-line-print-of-log-is-incorrect)
- [Behebt das Problem des Verk√§ufers:publiziere Commabnd kann Verzeichnis nicht ver√∂ffentlichen](#fix-the-problem-of-the-vendor-publish-commabnd-can-not-publish-directory)

### v1.13.10

- [Bearbeite die Spuren beim Aufruf von Log.Info nach Log.Error](#fix-the-traces-do-not-cleaned-when-calling-log-info-after-log-error)
- [Repariere das GetAttribut Orm Event gibt Fehlerdaten zur√ºck](#fix-the-getattribute-of-orm-event-returns-error-data)
- [ToSql, ToRawSql Methoden f√ºr ORM](#add-tosql-torawsql-methods-for-orm)

## Upgrade-Anleitung

Bitte aktualisieren Sie das Framework Schritt f√ºr Schritt entsprechend dem Inhalt in diesem Abschnitt.

**Gesch√§tzte Upgrade-Zeit: 10 Minuten**

### 1. Aktualisiere Abh√§ngigkeiten

Abh√§ngigkeiten in der `go.mod` Datei aktualisieren:

```
go get -u github.com/goravel/framework@v1.13.9 && go get -u github.com/goravel/gin
```

### 2. Neue Dateien hinzuf√ºgen

[tests](https://github.com/goravel/goravel/tree/v1.13.x/tests)

[database/seeders/database_seeder.go](https://github.com/goravel/goravel/tree/v1.13.x/database/seeders/database_seeder.go)

[app/providers/database_service_provider.go](https://github.com/goravel/goravel/tree/v1.13.x/app/providers/database_service_provider.go)

### 3. Neue Anbieter registrieren

Bestellung beachten:

```go
import (
  "github.com/goravel/framework/testing"
  "github.com/goravel/gin"
)

// config/app. o
"providers": []foundation.ServiceProvider{
  ...
  &validation.ServiceProvider{},
  // Neu
  &testing. erviceProvider{}, 
  &providers.AppServiceProvider{},
  ...
  &providers. alidationServiceProvider{},
  // Neuer
  &providers.DatabaseServiceProvider{}, 
  // Neuer
  &gin.ServiceProvider{}, 
}
```

### 4. Konfiguration hinzuf√ºgen

√Ñndern [config/http.go](https://github.com/goravel/goravel/tree/v1.13.x/config/http.go)

```go
import (
  "github.com/goravel/framework/contracts/route"
  "github.com/goravel/framework/facades"
  ginfacades "github.com/goravel/gin/facades"
)

config. dd("http", map[string]any{
  // HTTP Treiber
  "default": "gin",
  // HTTP Drivers
  "drivers": mappe[string]any{
    "gin": mappe[string]any{
      "route": func() (route. oute, error) {
        return ginfacades. oute("gin"), nil
      },
    },
  },
  . .
}
```

√Ñndern [config/cors.go](https://github.com/goravel/goravel/tree/v1.13.x/config/cors.go)

```go
config.Add("cors", map[string]any{
  ...
  // Neu
  "paths": []string{"*"}, 
  "allowed_methods": []string{"*"},
  ...
}
```

### 5. Entferne standardm√§√üig die globale HTTP Middleware geladen

1. Die `tls` und `cors` Middleware wurden in den Standard-HTTP-Treiber integriert, daher `middleware. ors()` und
  `middleware.Tls()` in der `app/http/kernel.go` Datei m√ºssen entfernt werden.

2. Die `facades.Route().GlobalMiddleware(http.Kernel{}.Middleware()...)` Methode in der
  `app/providers/route_service_provider.go` Datei bewegt sich zu `Boot` von `Register`:

```go
Paketanbieter

...

Typ RouteServiceProvider struct {
}

func (Empf√§nger *RouteServiceProvider) Registrieren (App-Stiftung. pplication) {
}

func (Empf√§nger *RouteServiceProvider) Boot(App Foundation. pplication) {
  //Add HTTP middleware
  facades.Route().GlobalMiddleware(http.Kernel{}.Middleware()...)

  receiver. onfigureRateLimiting()

  routes.Web()
}

func (Empf√§nger *RouteServiceProvider) configureRateLimiting() {

}
```

### 6. Die R√ºckgabe des Controllers optimieren

`Controller` f√ºgt den R√ºckgabewert `http.Response`, `ctx.Response()` kann direkt zur√ºckgegeben werden, es gibt keine Notwendigkeit,
`return` separat zu verwenden, um die Logik fl√ºssiger zu machen.

```go
// Vor
func (r *UserController) Show(ctx http.Context) {
  ctx.Response().Success().Json(http. son{
    "Hallo": "Goravel",
  })
  return
}

// After
func (r *UserController) Show (ctx http. ontext) http.Response {
  return ctx.Response().Success().Json(http.Json{
    "Hello": "Goravel",
  })
}
```

### 7. √Ñndern Sie die Parameter der Gruppenmethode in facades.Route()

√Ñndere `route.Route` zu `route.Router`Ôºö

```go
// Vor
facades.Route().Group(func(route route.Route)

// Nach
facades.Route().Group(func(route route.Router)
```

### 8. Optimieren Sie Denken und merken Sie sich Forever Methoden in facades.Cache()(Wenn verwendet)

Der Typ von `callback` √§ndert sich zu `func() (any, error)` von `func() any`:

```go
// Vor
Erinnerung (Schl√ºsselzeichen, ttl Zeit). uration, callback func() any) (any, error)
RememberForever(key string, callback func() any) (any, error)

// After
Remember(key string, ttl time). uration, callback func() (any, error)) (any, error)
RememberForever(key string, callback func() (any, error)) (any, error) (any, error)
```

### 9. √Ñndern Sie den Paketnamen von access.NewAllowResponse und access.NewDenyResponse(wenn verwendet)

√Ñndere `/contracts/auth/access` zu `/auth/access`:

```go
// Vor
Import von "github.com/goravel/framework/contracts/auth/access"

access.NewAllowResponse()
access.NewDenyResponse()

// Nach
Import von "github.com/goravel/framework/auth/access"

access.NewAllowResponse()
access.NewDenyResponse()
```

### 10. Entfernen Sie veraltete Methoden (wenn verwendet)

1. Entferne `ctx.Request().Form()` und `ctx.Request().Json()` Methoden, verwende stattdessen die `ctx.Request().Input()` Methode;

2. Entferne `GetLevel`, `GetTime`, `GetMessage` Methoden des `Log` benutzerdefinierten Treibers, benutze stattdessen `Level`, `Time`, `Message` Methoden
  ;

3. Entferne die `gorm.New` Methode, die Methode wird verwendet, um die `gorm` Instanz direkt zu erhalten, es wird nicht mehr empfohlen.
  Verwende stattdessen die `gorm.NewGormImpl` Methode;

## Funktionseinleitung

### Verteilen

Version: v1.13.1

[F√ºr Detail](../orm/seeding)

### Fabriken

Version: v1.13.1

[F√ºr Detail](../orm/factories)

### Testen

Version: v1.13.1

[F√ºr Detail](../testing/quickstart)

### Aufrufe

Version: v1.13.1

[F√ºr Detail](../basic/views)

### Upgrade die Standardversion von Golang auf 1.20

Version: v1.13.1

Golang 1.18 und 1.19 wurden eingestellt und das Framework wurde auf 1.20
entsprechend aktualisiert, [f√ºr Detail](https://endoflife.date/go). Wenn Sie die Verwendung von 1.18 oder 1.19 fortsetzen m√∂chten, √§ndern Sie einfach die
-Versionsnummer in `go.mod`, sie sind derzeit vollst√§ndig kompatibel.

### Aufgabenplanung unterst√ºtzt Skalierung horizontal

Version: v1.13.1

[F√ºr Detail](../advanced/schedule#running-tasks-on-one-server)

### Debug-Methoden hinzuf√ºgen

Version: v1.13.1

[F√ºr Detail](../advanced/helpers#debug)

### make:controller Befehl f√ºgt Parameter hinzu

Version: v1.13.1

Der `make:controller` Befehl f√ºgt `--resource` Parameter hinzu, der CURD struct kann einfach erstellt werden:

```
go run . artisan make:controller --resource UserController
```

### Statusmethode f√ºr Antwort hinzuf√ºgen

Version: v1.13.1

[F√ºr Detail](../basic/responses#custom-code)

### F√ºge Summen und Cursor Methoden f√ºr Orm hinzu

Version: v1.13.1

[F√ºr Detail](../orm/quickstart#facades-orm-query-facades-orm-transaction-available-functions)

### Der Routenmodul unterst√ºtzt Konfigurieren Treiber

Version: v1.13.1

Trennen Sie den urspr√ºnglichen Standard-Treiber-Gin des Route-Moduls in ein Paket, es kann durch
Konfiguration in Goravel injiziert werden. nach dieser Optimierung werden Anbieter ein bequemer Kanal zum Einschleusen anderer HTTP-Pakete in Goravel,
derzeit zwei HTTP-Pakete offiziell unterst√ºtzt:

| Fahrer | Link                                                                                                 |
| ------ | ---------------------------------------------------------------------------------------------------- |
| Gin    | [https://github.com/goravel/gin](https://github.com/goravel/gin)     |
| Faser  | [https://github.com/goravel/fiber](https://github.com/goravel/fiber) |

### InputArray und InputMap Methoden f√ºr Anfrage hinzuf√ºgen

Version: v1.13.1

[F√ºr Detail](../basic/requests#retrieving-an-input-value)

### Das Modell der Orm unterst√ºtzt benutzerdefinierte Verbindungen

Version: v1.13.1

[F√ºr Detail](../orm/quickstart#database-connections)

### Cloud-Treiber f√ºr Dateisystem hinzuf√ºgen

Version: v1.13.1

[F√ºr Detail](https://github.com/goravel/cloudinary)

### Neue Kettenmethoden f√ºr Log hinzuf√ºgen

Version: v1.13.1

[F√ºr Detail](../basic/logging#chain-methods)

### Fassaden reparieren.Auth().User()

Version: v1.13.1

1. Beheben Sie das Problem, dass kein Fehler auftritt, wenn der Benutzer bei der Verwendung der `facades.Auth().User(ctx, &user)`
  Methode nicht existiert.

2. Beheben Sie das Problem, dass `user` gefunden werden kann, wenn der Prim√§rschl√ºssel nicht `int`;

### Benutzerdefinierter .env-Pfad kann in manchen F√§llen nicht wirksam werden

Version: v1.13.1

Beheben Sie das Problem, dass Custom .env Pfad in einigen F√§llen nicht wirksam wird.

### Fix Token l√§uft sofort ab wenn ttl == 0 ist in JWT gesetzt

Version: v1.13.1

Erwarten Sie, dass das Token nie ablaufen wird, wenn `ttl == 0`.

### Korrektur der Fassaden.Storage().Url() Gibt einen falschen Pfad unter Windows zur√ºck

Version: v1.13.2

[Ticket #263](https://github.com/goravel/goravel/issues/263)

### Abnorme Verbindung reparieren, wenn das Postgres Passwort leer ist

Version: v1.13.2

[Problem #270](https://github.com/goravel/goravel/issues/270)

### Beheben Sie die Methode mit dem Mauszeiger ist ung√ºltig bei der Verwendung der Orm Methode

Version: v1.13.2

[Ticket #253](https://github.com/goravel/goravel/issues/253)

### Die Service Startup unterst√ºtzt Umgebungsvariablen

Version: v1.13.4

[Ticket #265](https://github.com/goravel/goravel/issues/265)

### Fix Das Validierungsmodul Cant Verify The Route Params

goravel/gin: v1.1.6

goravel/fiber: v1.1.11

[Ticket #294](https://github.com/goravel/goravel/issues/294)

### Fiber-Treiber-R√ºckgabedatei korrigieren

goravel/fiber: v1.1.11

[Ticket #299](https://github.com/goravel/goravel/issues/299)

### Repariere die globale Middleware der Fiber-Treiber-Panik

goravel/fiber: v1.1.11

[Ticket #300](https://github.com/goravel/goravel/issues/300)

### Fiber-Typ-Einstellung des Fiber-Treibers unterscheidet sich vom Gin-Treiber

goravel/fiber: v1.1.11

[Ticket #296](https://github.com/goravel/goravel/issues/296)

### Die Verbindung des Modells reparieren funktioniert nicht

goravel/framework: v1.13.5

[Problem #312](https://github.com/goravel/goravel/issues/312)

### Den Fehler des Mock-Log beheben

goravel/framework: v1.13.5

[Problem #320](https://github.com/goravel/goravel/issues/320)

### Das Problem der nichtlinearen Ausf√ºhrung der Abfragekette beheben

goravel/Framework: v1.13.6 v1.13.7

[Problem #341](https://github.com/goravel/goravel/issues/341)

### Beheben Sie das Problem der facades.Auth().Parse()

goravel/framework: v1.13.8

[Ticket #388](https://github.com/goravel/goravel/issues/388)

### Beheben Sie das Problem der facades.Orm().WithContext()

goravel/framework: v1.13.8

[Problem #390](https://github.com/goravel/goravel/issues/390)

### Das Warteschlangenprotokoll wird von APP_DEBUG kontrolliert

goravel/framework: v1.13.8

Die Level `Debug` und `Info` werden nicht gedruckt, wenn `APP_DEBUG=false`

[Ticket #389](https://github.com/goravel/goravel/issues/389)

### Das Problem des Ausdrucks der neuen Zeile zu beheben ist falsch

goravel/framework: v1.13.9

[Ticket #395](https://github.com/goravel/goravel/issues/395)

### Beheben Sie das Problem des Verk√§ufers: Commabnd kann Verzeichnis nicht publizieren

goravel/framework: v1.13.9

[Ticket #345](https://github.com/goravel/goravel/issues/345)

### Fehlerbehebung der Traces beim Aufrufen der Log.Info nach Log.Info nicht bereinigt

goravel/framework: v1.13.10

[Ticket #402](https://github.com/goravel/goravel/issues/402)

### Fehlerbereinigung des GetAttributs des Orm-Ereignisses

goravel/framework: v1.13.10

[Ticket #405](https://github.com/goravel/goravel/issues/405)

### ToSql, ToRawSql Methoden f√ºr ORM hinzuf√ºgen

goravel/framework: v1.13.10

[Ticket #411](https://github.com/goravel/goravel/issues/411)
