# Upgrade auf v1.12 von v1.11

## v1.12.6

### Fehlerbehebungen üêõ

- [Beheben des JWT](#fix-the-problem-of-jwt)

## v1.12.5

### Fehlerbehebungen üêõ

- [Fix the problem Of facades.Orm().Query().Load()](#fix-the-problem-of-facades-orm-query-load)

## v1.12.4

### Fehlerbehebungen üêõ

- [Das Problem des Throttle Middleware Wurfpanik](#the-problem-of-the-throttle-middleware-throw-panic)

## v1.12.3

### Fehlerbehebungen üêõ

- [Das Problem des make:package Befehls unter Windows](#the-problem-of-make-package-command-under-windows)

## v1.12.2

### Fehlerbehebungen üêõ

- [Das Problem der facades.Gate() Return nil](#the-problem-of-facades-gate-return-nil)

## v1.12.1

### Fehlerbehebungen üêõ

- [Das Panikproblem durch Dateipfad unter Windows](#the-panic-problem-caused-by-file-path-under-windows)

## v1.12.0

### Spannende neue Features üéâ

- [Service Container(1.12.0)](#service-container)
- [Package Development(1.12.0)](#package-development)
- [Kohlenstoffmodul hinzuf√ºgen](#add-helpers-methods)

## Verbesserungen :Rakete:

- [Artisan Flag f√ºgt neue Methoden hinzu](#artisan-flag-adds-new-methods)
- [Helfer-Methoden hinzuf√ºgen](#add-helpers-methods)
- [Abh√§ngigkeiten aktualisieren](#upgrade-dependencies)
- [Migration f√ºgt neue Methoden hinzu](#migration-adds-new-methods)
- [Einige `make` Befehle unterst√ºtzen Unterverzeichnisse](#some-make-commands-support-subdirectories)

## √Ñnderungen durchbrechen üõ†Ô∏è

- [Den Aufruftyp der Facades(1.12.0)](#_3-modify-facades)
- [Artisan Flag(1.12.0)](#_6-modify-flag-in-the-artisan-command-if-using)
- [Dateisystem Modul k√ºndigt Standardunterst√ºtzung f√ºr S3, OSS, COS, Minio](#_7-filesystem-module-cancels-default-support-for-s3-oss-cos-minio)
- [Cache-Modul beendet Standardunterst√ºtzung zum Redis](#_8-cache-module-cancels-default-support-for-redis)
- [√Ñndere den Typ des CreatedAt, Updatedat im Modell](#_9-change-the-type-of-createdat-updatedat-in-model)
- [Die Regel des Validierungsmoduls optimieren](#_10-optimize-the-rule-of-validation-module)

## Upgrade-Anleitung

Bitte aktualisieren Sie das Framework Schritt f√ºr Schritt entsprechend dem Inhalt in diesem Abschnitt.

**Gesch√§tzte Upgrade-Zeit: 30 Minuten**

### 1. Aktualisiere Abh√§ngigkeiten

Abh√§ngigkeiten in der `go.mod` Datei aktualisieren:

```
go get -u github.com/goravel/framework@v1.12.0 && go mod tidy
```

Es gibt einen Fehler nach dem Ausf√ºhren von `go mod tidy`, der Fehler wird nach der Ausf√ºhrung der folgenden Upgrade-Schritte behoben.

### 2. `bootstrap/app.go` √§ndern

```go
// Vor
app := foundation.Anwendung{}

// Nach
app := foundation.NewApplication()
```

### 3. Fassaden √§ndern.\*

| Vorher                                | Nach                    |
| ------------------------------------- | ----------------------- |
| `facades.Artisan`                     | `facades.Artisan()`     |
| `facades.Auth`                        | `facades.Auth()`        |
| `facades.Cache`                       | `facades.Cache()`       |
| `facades.Config`                      | `facades.Config()`      |
| `facades.Crypt`                       | `facades.Crypt()`       |
| `facades.Event`                       | `facades.Event()`       |
| "facades.Gate"        | `facades.Gate()`        |
| `facades.Grpc`                        | `facades.Grpc()`        |
| `facades.Hash`                        | `facades.Hash()`        |
| `facades.Log`                         | `facades.Log()`         |
| `facades.Mail`                        | `facades.Mail()`        |
| `facades.Orm`                         | `facades.Orm()`         |
| `facades.queue`                       | `facades.Queue()`       |
| "facades.RateLimiter" | `facades.RateLimiter()` |
| `facades.Route`                       | `facades.Route()`       |
| "facades.Schedule"    | `facades.Schedule()`    |
| "facades.Storage"     | `facades.Storage()`     |
| `facades.Validierung`                 | `facades.Validation()`  |

### 4. √Ñndere `app/providers/*`

Import f√ºr alle Dateien hinzuf√ºgen:

```go
import (
  "github.com/goravel/framework/contracts/foundation"
)
```

Alle `Register`, `Boot` Methoden hinzuf√ºgen `app foundation.Application` Eingabeparameter:

```go
func (Empf√§nger *AppServiceProvider) Registrieren (app foundation.Anwendung) {}

func (Empf√§nger *AppServiceProvider) Boot(app foundation.Anwendung) {}
```

### 5. `app/config/app.go` √§ndern

Import √§ndern:

```go
// Vor
"github.com/goravel/framework/contracts"

"providers": []contracts.ServiceProvider{

// Nach
"github.com/goravel/framework/contracts/foundation"

"providers": []foundation.ServiceProvider{ 

 //
```

### 6. Markierung im Artisan-Befehl √§ndern (wenn verwendet)

Die Elemente im `[]command.Flag` f√ºgen `&command.StringFlag` Typ hinzu:

```go
// Vor
func (Empf√§nger *VendorPublishCommand) Extend() Befehl. xtend {
  return command.Extend{
    Kategorie: "test",
    Flags: []Befehl. lag{
      {
        Name: "test",
      },
    },
  }
}

// Nach
Func (Empf√§nger *VendorPublishCommand) Extend() Befehl. xtend {
  return command. xtend{
    Kategorie: "test",
    Flags: []command.Flag{
      &command. tringFlag{
        Name: "test",
      },
    },
  }
}
```

### 7. Dateisystem-Modul k√ºndigt Standardunterst√ºtzung f√ºr S3, OSS, COS, Minio ab

Um das Laden unn√∂tiger dritter Pakete zu reduzieren, das Paketvolumen zu reduzieren und die Kompilierungseffizienz zu verbessern
Goravel wird jeden Modultreiber schrittweise in ein unabh√§ngiges Erweiterungspaket entfernen. Bei diesem Upgrade bricht das
`Filesystem` Modul die Standardunterst√ºtzung f√ºr `S3`, `OSS`, `COS`, `Minio` Treiber und √ºbertr√§gt Unterst√ºtzung f√ºr
unabh√§ngige Erweiterungspakete.

Entfernt Schl√ºssel in `config/filesystems.go::disks` au√üer `local` und Treibern, die verwenden:

```go
// Ge√§ndert
"Disks": Karte[string]any{
  "local": Karte[string]any{
    "driver": "local",
    "root": "storage/app",
    "url": config. nv("APP_URL", "").(string) + "/storage",
  },
},
```

Wenn Sie andere Treiber `local` erwarten, lesen Sie bitte die entsprechende Treiber-Dokumentation f√ºr die Installation:

| Fahrer | Link                                                                                                 |
| ------ | ---------------------------------------------------------------------------------------------------- |
| S3     | [https://github.com/goravel/s3](https://github.com/goravel/s3)       |
| OSS    | [https://github.com/goravel/oss](https://github.com/goravel/oss)     |
| COS    | [https://github.com/goravel/cos](https://github.com/goravel/cos)     |
| Mine   | [https://github.com/goravel/minio](https://github.com/goravel/minio) |

### 8. Cache-Modul bricht Standardunterst√ºtzung f√ºr Redis ab

Entferne den `redis` Schl√ºssel in `config/cache.go::stores` wenn du ihn nicht verwendest:

```go
// Modifiziert
"stores": Karte[string]any{
  "memory": Karte[string]any{
    "driver": "memory",
  },
},
```

Wenn du den `redis` Treiber verwendest, lies bitte die `redis` Treiber-Dokumentation f√ºr die Installation:

| Fahrer | Link                                                                                                 |
| ------ | ---------------------------------------------------------------------------------------------------- |
| Redis  | [https://github.com/goravel/redis](https://github.com/goravel/redis) |

### 9. √Ñndere den Typ des CreatedAt, UpdatedAt In Model(wenn verwendet)

Um den Zeittyp in der API-Ausgabe standardm√§√üig zu machen, √§ndern Sie den Typ `CreatedAt`, `UpdatedAt` in `Model` in
`carbon.DateTime` von `time.Time`. Wenn du zus√§tzliche Verarbeitung f√ºr diese beiden Felder hast, kannst du den originalen
`time.Time` Typ durch die `CreatedAt.ToStdTime()` Methode erhalten.

### 10. Das Validierungsmodul optimieren (wenn verwendet)

√úberpr√ºfen Sie den Null-Wert in der urspr√ºnglichen Validatum-Regel, zum Beispiel, wenn die Regel auf `date` gesetzt ist und `required` nicht gesetzt ist
und das Feld ist leer oder nicht √ºbergeben, das Validierungsmodul wird das Feld erforderlich machen. Nach der Optimierung wird das
Validierungsmodul die Pr√ºfung bestanden, die intuitiver zu bedienen ist. If you are using relevant validation, please
ensure that the upgrade is as expected.

### 11. Abh√§ngigkeiten erneut installieren

Starte `go mod tidy`

## Funktionseinleitung

### Dienst-Container

Version: v1.12.0

Alle Dienste in Goravel sind im Service-Container registriert und bieten einen starken Support f√ºr das Paket
Entwicklung, [For Detail](../foundation/container)

### Paketentwicklung

Version: v1.12.0

Pakete sind der prim√§re Weg, um Goravel-Funktionalit√§t hinzuzuf√ºgen, kann die √ñkologie von
Goravel, [F√ºr Detail] bereichern (../advanced/package)

### Artisan Flagge f√ºgt neue Methoden hinzu

Version: v1.12.0

F√ºge Methoden f√ºr das Artisan Modul hinzu, um verschiedene Typen von
`Flag` zu erhalten, [For Detail](../advanced/artisan#options)

### Hilfsmethoden hinzuf√ºgen

Version: v1.12.0

F√ºge `path` und `carbon` Helfer-Methoden hinzu, du kannst einfach die Pfadinformationen erhalten und dich mit der Zeit im
Projekt besch√§ftigen, [For Detail](../advanced/helpers)

### Abh√§ngigkeiten aktualisieren

Version: v1.12.0

Um einen besseren Funktionsumfang zu bieten, wurden die Versionen aller Pakete, von denen Goravel abh√§ngt, aktualisiert.

### Migration f√ºgt neue Methoden hinzu

Version: v1.12.0

| Befehle                           | Aktion                                                      |
| --------------------------------- | ----------------------------------------------------------- |
| migrieren:fresh   | Alle Tabellen l√∂schen und alle Migrationen erneut ausf√ºhren |
| migrieren:refresh | Alle Migrationen zur√ºcksetzen und erneut ausf√ºhren          |
| migrate:reset     | Alle Datenbankmigrationen zur√ºcksetzen                      |
| migrate:status    | Zeige den Status jeder Migration                            |

### Einige `make` Befehle unterst√ºtzen Unterverzeichnisse

Version: v1.12.0

| ÂëΩ‰ª§                                                  | ÁîüÊàêÊñá‰ª∂                                                                              |
| --------------------------------------------------- | --------------------------------------------------------------------------------- |
| make:policy User/AuthPolicy         | app/polices/User/auth_policy.go              |
| make:command Goravel/CleanCache     | app/console/commands/Goravel/clean_cache.go  |
| make:model User/Phone               | app/models/User/phone.go                                          |
| make:observer User/PhoneObserver    | app/observers/User/phone_observer.go         |
| make:event User/GoravelEvent        | app/events/User/goravel_event.go             |
| make:listener User/GoravelListen    | app/listeners/User/goravel_listen.go         |
| make:controller User/AuthController | app/http/controllers/User/auth_controller.go |
| make:middleware User/Auth           | app/http/middleware/User/auth.go                                  |
| make:request Benutzer/Auth          | app/http/requests/User/auth.go                                    |
| make:job Goravel/Job                | app/jobs/Goravel/job.go                                           |
| make:rule Benutzer/Telefon          | app/rules/User/phone.go                                           |

### Das Panikproblem, das unter Windows durch Dateipfad verursacht wurde

Version: v1.12.1

Beheben Sie das durch Backslash verursachte Panikproblem, wenn der `make` Befehl Ordner automatisch unter Windows erstellt.

### Das Problem von facades.Gate() Return nil

Version: v1.12.2

Beheben Sie das Problem von `facades.Gate()` return nil.

### Das Problem des make:package Befehls unter Windows

Version: v1.12.3

Die vom Befehl `make:package` erstellte Datei hat unter Windows einen falschen Pfad.

### Das Problem der Drossel-Middleware-Panik

Version: v1.12.4

Beheben Sie das Problem der Drossel-Middleware wirft Panik.

### Beheben Sie das Problem der facades.Orm().Query().Load()

Version: v1.12.5

Beheben Sie das Problem, dass `facades.Orm().Query().Load()` das Modell in einigen F√§llen nicht korrekt laden kann.

### Das Problem von JWT beheben

Version: v1.12.6

Beheben Sie das Problem, dass, wenn das JWT-Token abgelaufen und ung√ºltig ist, der Ablauffehler zur√ºckgegeben wird, und der ung√ºltige Fehler wird erwartet, dass zuerst
zur√ºckgegeben wird.
