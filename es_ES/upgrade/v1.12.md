# Actualizar a v1.12 desde v1.11

## v1.12.6

### Corregir errores üêõ

- [Corregir el problema de JWT](#fix-the-problem-of-jwt)

## v1.12.5

### Corregir errores üêõ

- [Corregir el problema de las facades.Orm().Query().Load()](#fix-the-problem-of-facades-orm-query-load)

## v1.12.4

### Corregir errores üêõ

- [El Problema del Throttle Middleware Throw Panic](#the-problem-of-the-throttle-middleware-throw-panic)

## v1.12.3

### Corregir errores üêõ

- [El Problema de make:package Command Bajo Windows](#the-problem-of-make-package-command-under-windows)

## v1.12.2

### Corregir errores üêõ

- [El problema de las fachades.Gate() Nil] (#the-problem-of-facades-gate-return-nil)

## v1.12.1

### Corregir errores üêõ

- [El problema del p√°nico ca√≠do por la ruta del archivo bajo Windows](#the-panic-problem-caused-by-file-path-under-windows)

## v1.12.0

### Excitantes nuevas caracter√≠sticas üéâ

- [Contenedor de Servicio(1.12.0)](#service-container)
- [Desarrollamiento del paquete(1.12.0)](#package-development)
- [A√±adir M√≥dulo de Carbono](#add-helpers-methods)

## Mejoras üöÄ

- [La bandera Artisan a√±ade nuevos m√©todos](#artisan-flag-adds-new-methods)
- [A√±adir M√©todos de Ayudantes](#add-helpers-methods)
- [Mejorar dependencias](#upgrade-dependencies)
- [Migration Adds New Methods](#migration-adds-new-methods)
- [Algunos Subdirectorios de Soporte de Comandos](#some-make-commands-support-subdirectories)

## Cambios de ruptura üõ†Ô∏è

- [Modificar el tipo de llamada de las fachadas(1.12.0)](#_3-modify-facades)
- [Optimizar bandera artesana (1.12.0)](#_6-modify-flag-in-the-artisan-command-if-using)
- [Filesystem Module Cancela el soporte predeterminado para S3, OSS, COS, Minio](#_7-filesystem-module-cancels-default-support-for-s3-oss-cos-minio)
- [Cache M√≥dulo Cancela Soporte Predeterminado para Redis](#_8-cache-module-cancels-default-support-for-redis)
- [Cambiar el tipo de creadoAt, actualizado en el modelo](#_9-change-the-type-of-createdat-updatedat-in-model)
- [Optimizar la regla del M√≥dulo de Validaci√≥n](#_10-optimize-the-rule-of-validation-module)

## Actualizar Gu√≠a

Por favor, actualice el framework paso a paso seg√∫n el contenido de esta secci√≥n.

**Tiempo estimado de mejora: 30 minutos**

### 1. Actualizando dependencias

Actualizar dependencias en el archivo `go.mod`:

```
go get -u github.com/goravel/framework@v1.12.0 && go mod tidy
```

Hay un error despu√©s de ejecutar `go mod tidy`, el error se resolver√° despu√©s de realizar los siguientes pasos de actualizaci√≥n.

### 2. Modifica `bootstrap/app.go`

```go
// Antes de
app := foundation.Application{}

// Despu√©s de
app := foundation.NewApplication()
```

### 3. Modificar fachadas.\*

| Antes                 | Despu√©s                 |
| --------------------- | ----------------------- |
| `facades.Artisan`     | `facades.Artisan()`     |
| `facades.Auth`        | `facades.Auth()`        |
| `facades.Cache`       | `facades.Cache()`       |
| `facades.Config`      | `facades.Config()`      |
| `facades.Crypt`       | `facades.Crypt()`       |
| `facades.Evento`      | `facades.Event()`       |
| `facades.Gate`        | `facades.Gate()`        |
| `facades.Grpc`        | `facades.Grpc()`        |
| `facades.Hash`        | `facades.Hash()`        |
| `facades.Log`         | `facades.Log()`         |
| `facades.Mail`        | `facades.Mail()`        |
| `facades.Orm`         | `facades.Orm()`         |
| `facades.Queue`       | `facades.Queue()`       |
| `facades.RateLimiter` | `facades.RateLimiter()` |
| `facades.Route`       | `facades.Route()`       |
| `facades.Schedule`    | `facades.Schedule()`    |
| `facades.Storage`     | `facades.Storage()`     |
| `facades.Validation`  | `facades.Validation()`  |

### 4. Modificar `app/providers/*`

A√±adir importaci√≥n para todos los archivos:

```go
import (
  "github.com/goravel/framework/contracts/foundation"
)
```

Todos los m√©todos `Register`, `Boot` A√±ade el par√°metro de entrada `app foundation.Application`:

```go
func (receptor *AppServiceProvider) Register(app foundation.Application) {}

func (receptor *AppServiceProvider) Boot(app foundation.Application) {}
```

### 5. Modifica `app/config/app.go`

Modificar importaci√≥n:

```go
// Antes de
"github.com/goravel/framework/contracts"

"providers": []contracts.ServiceProvider{

// Despu√©s de
"github.com/goravel/framework/contracts/foundation"

"providers": []foundation.ServiceProvider{
```

### 6. Modificar Bandera en el comando Artisan (Si est√° usando)

Los elementos en el `[]command.Flag` a√±adir el tipo `&command.StringFlag`:

```go
// Antes de
func (receptor *VendorPublishCommand) Comando Extend(). xtend {
  return command.Extend{
    Category: "test",
    Flags: []command. lag{
      {
        Nombre: "test",
      },
    },
  }
}

// Despu√©s de
func (receptor *VendorPublishCommand) Comando Extend(). xtend {
  comando de retorno. xtend{
    Categor√≠a: "test",
    Flags: []command.Flag{
      &command. tringFlag{
        Nombre: "test",
      },
    },
  }
}
```

### 7. Filesystem M√≥dulo Cancela el soporte predeterminado para S3, OSS, COS, Minio

Para reducir la carga de terceros paquetes innecesarios, reducir el volumen de los paquetes y mejorar la eficiencia de la compilaci√≥n.
Goravel gradualmente despojar√° cada controlador de m√≥dulo a un paquete de expansi√≥n independiente. In this upgrade, the
`Filesystem` module cancels the default support for `S3`, `OSS`, `COS`, `Minio` drivers, and transfers support to
independent extension packages.

Elimina las claves de `config/filesystems.go::disks` excepto `local` y los controladores que est√°n usando:

```go
// Modificado
"disks": mapear[string]any{
  "local": mapear[string]any{
    "driver": "local",
    "root": "storage/app",
    "url": config. nv("APP_URL", "").(string) + "/storage",
  },
},
```

Si est√° utilizando otros controladores esperan `local`, por favor consulte la documentaci√≥n correspondiente del controlador para la instalaci√≥n:

| Conductor | Enlace                                                                                               |
| --------- | ---------------------------------------------------------------------------------------------------- |
| T3        | [https://github.com/goravel/s3](https://github.com/goravel/s3)       |
| OSS       | [https://github.com/goravel/oss](https://github.com/goravel/oss)     |
| COS       | [https://github.com/goravel/cos](https://github.com/goravel/cos)     |
| Mini      | [https://github.com/goravel/minio](https://github.com/goravel/minio) |

### 8. Cache M√≥dulo Cancela Soporte Predeterminado para Redis

Elimina la clave `redis` en `config/cache.go::stores` si no la est√°s usando:

```go
// Modificado
"stores": map[string]any{
  "memory": map[string]any{
    "driver": "memory",
  },
},
```

Si est√°s usando el controlador `redis`, por favor consulta la documentaci√≥n del controlador `redis` para la instalaci√≥n:

| Conductor | Enlace                                                                                               |
| --------- | ---------------------------------------------------------------------------------------------------- |
| Redis     | [https://github.com/goravel/redis](https://github.com/goravel/redis) |

### 9. Cambiar el tipo de createdAt, actualizado en el Modelo (Si usa)

Para hacer el tiempo m√°s est√°ndar en la salida API, el tipo de `CreatedAt`, `UpdatedAt` en `Model` cambia a
`carbon.DateTime` de `time.Time`. Si tienes procesamiento adicional para estos dos campos, puedes obtener el tipo
`time.Time` original a trav√©s del m√©todo `CreatedAt.ToStdTime()`.

### 10. Optimizar la regla del m√≥dulo de validaci√≥n (si est√° usando)

Compruebe el valor cero en la regla de validaci√≥n original, por ejemplo, si la regla est√° establecida en `date` y `required` no est√° definida.
y el campo est√° vac√≠o o no pasado, el m√≥dulo de validaci√≥n le pedir√° ese campo es obligatorio. Despu√©s de la optimizaci√≥n, el m√≥dulo de validaci√≥n
pasar√° la verificaci√≥n, que es m√°s intuitivo de usar. If you are using relevant validation, please
ensure that the upgrade is as expected.

### 11. Instalar dependencias de nuevo

Ejecuta `go mod titdy`

## Introducci√≥n de la funci√≥n

### Contenedor de servicio

Versi√≥n: v1.12.0

Todos los servicios en Goravel est√°n registrados en el service container, proporcionando un fuerte soporte para el desarrollo del paquete
, [For Detail](../foundation/container)

### Desarrollo de paquetes

Versi√≥n: v1.12.0

Los paquetes son la forma principal de agregar funcionalidad a Goravel, puede enriquecer la ecolog√≠a de
Goravel, [Para m√°s detalles](../advanced/package)

### La bandera Artisan a√±ade nuevos m√©todos

Versi√≥n: v1.12.0

A√±adir m√©todos para el m√≥dulo Artisan para obtener diferentes tipos de
`Bandera`, [Para Detalles](../advanced/artisan#options)

### A√±adir m√©todos de ayuda

Versi√≥n: v1.12.0

A√±ade los m√©todos `path` y `carbon` Ayudantes, puedes obtener f√°cilmente la informaci√≥n de la ruta y tratar el tiempo en el proyecto
, [Para m√°s detalles](../advanced/helpers)

### Actualizar dependencias

Versi√≥n: v1.12.0

Para proporcionar un mejor soporte de caracter√≠sticas, se han actualizado las versiones de todos los paquetes de los que depende Goravel.

### Migration a√±ade nuevos m√©todos

Versi√≥n: v1.12.0

| Comandos                           | Accin                                                             |
| ---------------------------------- | ----------------------------------------------------------------- |
| migrar:fresco      | Borrar todas las tablas y volver a ejecutar todas las migraciones |
| migrar:actualizar  | Restablecer y volver a ejecutar todas las migraciones             |
| migrar:restablecer | Rollback todas las migraciones de base de datos                   |
| migrar:estado      | Mostrar el estado de cada migraci√≥n                               |

### Algunos subdirectorios de Comandos `make` soportan subdirectorios

Versi√≥n: v1.12.0

| ÂëΩ‰ª§                                                           | ÁîüÊàêÊñá‰ª∂                                                                              |
| ------------------------------------------------------------ | --------------------------------------------------------------------------------- |
| make:pol√≠tica de usuario/Pol√≠tica de Autor√≠a | app/pol√≠ticas/Usuario/auth_policy.go         |
| make:comando Goravel/CleanCache              | app/console/commands/Goravel/clean_cache.go  |
| make:model User/Phone                        | app/models/User/phone.go                                          |
| make:observer User/PhoneObserver             | app/observers/User/phone_observer.go         |
| make:event User/GoravelEvent                 | app/events/Usuario/goravel_event.go          |
| make:listener Usuario/GoravelListen          | app/listeners/Usuario/goravel_listen.go      |
| make:controlador User/AuthController         | app/http/controllers/User/auth_controller.go |
| make:middleware Usuario/Auth                 | app/http/middleware/User/auth.go                                  |
| make:solicitar usuario/Auth                  | app/http/requests/User/auth.go                                    |
| make:job Goravel/Job                         | app/jobs/Goravel/job.go                                           |
| make:regla Usuario/Tel√©fono                  | app/rules/User/phone.go                                           |

### El problema del p√°nico puesto por la ruta del archivo bajo Windows

Versi√≥n: v1.12.1

Corregir el problema causado por la barra invertida cuando el comando `make` crea autom√°ticamente carpetas bajo Windows.

### El problema de facades.Gate() Devuelve nulo

Versi√≥n: v1.12.2

Corregir el problema de `facades.Gate()` devuelve nil.

### El problema de make:package Command bajo Windows

Versi√≥n: v1.12.3

El archivo creado por el comando `make:package` tiene una ruta err√≥nea bajo Windows.

### El Problema del Impulso del Middleware lanza el p√°nico

Versi√≥n: v1.12.4

Corregir el problema del middleware del acelerador arrojar p√°nico.

### Corregir el problema de facades.Orm().Query().Load()

Versi√≥n: v1.12.5

Corregir el problema que `facades.Orm().Query().Load()` no puede cargar el modelo correctamente en algunos casos.

### Corregir el problema de JWT

Versi√≥n: v1.12.6

Corregir el problema de que cuando el token JWT caduca e inv√°lida, se devuelve el error de caducidad, y se espera que primero se devuelva el error inv√°lido
.
