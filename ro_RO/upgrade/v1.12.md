# Actualizare la v1.12 de la v1.11

## v1.12.6

### Probleme rezolvate 🐛

- [Repară problema JWT](#fix-the-problem-of-jwt)

## v1.12,5

### Probleme rezolvate 🐛

- [Remediați problema facades.Orm().Query().Load()](#fix-the-problem-of-facades-orm-query-load)

## v1.12.4

### Probleme rezolvate 🐛

- [Problema cu panoul de Aruncare Middleware Tropical](#the-problem-of-the-throttle-middleware-throw-panic)

## v1.12.3

### Probleme rezolvate 🐛

- [Problema de marș:package Comanda sub Windows](#the-problem-of-make-package-command-under-windows)

## v1.12.2

### Probleme rezolvate 🐛

- [Problema fațades.Gate() Întoarce-te nil](#the-problem-of-facades-gate-return-nil)

## v1.12.1

### Probleme rezolvate 🐛

- [Problema de panică cauzată de calea fișierului în Windows](#the-panic-problem-caused-by-file-path-under-windows)

## v1.12.0

### Funcții noi sunt incredibile 🎉

- [Container(1.12.0)](#service-container)
- [Pachet de dezvoltare (1.12.0)](#package-development)
- [Add Carbon Module](#add-helpers-methods)

## Îmbunătățiri 🚀

- [Artizan Flag Adaos New Metods](#artisan-flag-adds-new-methods)
- [Add Helpers Methods](#add-helpers-methods)
- [Actualizare Dependenci](#upgrade-dependencies)
- [Migration Add New Methods](#migration-adds-new-methods)
- [Some `make` Commands Support Subdirectories](#some-make-commands-support-subdirectories)

## Ruperea modificărilor 🛠️

- [Modifică tipul de apelare a fațadei (1.12.0)](#_3-modify-facades)
- [Flag artizan optimizat (1.12.0)](#_6-modify-flag-in-the-artisan-command-if-using)
- [Suport implicit pentru S3, OSS, COS, Minio](#_7-filesystem-module-cancels-default-support-for-s3-oss-cos-minio)
- [Modulul Cache anulează suportul implicit pentru redis](#_8-cache-module-cancels-default-support-for-redis)
- [Change the Type of CreatedAt, Updatedat In Model](#_9-change-the-type-of-createdat-updatedat-in-model)
- [Optimizează regula modulului de validare](#_10-optimize-the-rule-of-validation-module)

## Ghid de actualizare

Vă rugăm să actualizați framework-ul pas cu pas în funcție de conținutul din această secțiune.

**Timp estimat de actualizare: 30 de minute**

### 1. Actualizarea dependentelor

Actualizează dependențele în fișierul `go.mod`:

```
go get -u github.com/goravel/framework@v1.12.0 && go mod tidy
```

A apărut o eroare după ce rulați `go mod tidy`, eroarea va fi rezolvată după efectuarea următorilor pași de actualizare.

### 2. Modificați `bootstrap/app.go`

```go
// Înainte de
aplicație := fundation.Application{}

// După
aplicație := fundation.NewApplication()
```

### 3. Modifică fațade.

| Înainte               | După                    |
| --------------------- | ----------------------- |
| `facades.Artisan`     | `facades.Artisan()`     |
| `facades.Auth`        | `facades.Auth()`        |
| `facades.Cache`       | `facades.Cache()`       |
| `facades.Config`      | `facades.Config()`      |
| `facades.Crypt`       | `facades.Crypt()`       |
| `facades.Event`       | `facades.Event()`       |
| `facades.Gate`        | `facades.Gate()`        |
| `facades.Grpc`        | `facades.Grpc()`        |
| `facades.Hash`        | `facades.Hash()`        |
| `facades.Log`         | `facades.Log()`         |
| `facades.Mail`        | `facades.Mail()`        |
| `facades.Orm`         | `facades.Orm()`         |
| `facades.coadă`       | `facades.coadă()`       |
| `facades.RateLimiter` | `facades.RateLimiter()` |
| `facades.Route`       | `facades.Route()`       |
| `facades.Schedule`    | `facades.Schedule()`    |
| `facades.Storage`     | `facades.Storage()`     |
| `facades.Validation`  | `facades.Validation()`  |

### 4. Modificați `app/providers/*`

Adaugă import pentru toate fișierele:

```go
import (
  "github.com/goravel/framework/contracts/foundation"
)
```

Toate metodele `Register`, `Boot` Adaugă parametrul de intrare `app foundation.Application`:

```go
func (destinatar *AppServiceProvider) Register(app foundation.Application) {}

func (receptor *AppServiceProvider) Boot(app fundation.Application) {}
```

### 5. Modificați `app/config/app.go`

Modificare import:

```go
// Before
"github.com/goravel/framework/contracts"

"providers": []contracts.ServiceProvider{

// After
"github.com/goravel/framework/contracts/foundation"

"providers": []foundation.ServiceProvider{
```

### 6. Modifică steagul în comanda Artizan (Dacă folosești)

Elementele din tipul `[]command.Flag` adaugă `&command.StringFlag`:

```go
// Înainte de comanda
func (destinatar *VendorPublishCommand) Extend(). xtend {
  return command.Extend{
    Category: "test",
    Flags: []command. lag{
      {
        Name: "test",
      },
    },
  }
} Comandă

// După
func (destinatar *VendorPublishCommand) Extend(). xtend {
  return command. Categoria xtend{
    : "test",
    Flags: []command.Flag{
      &comanda. tringFlag{
        Nume: "test",
      },
    },
  }
}
```

### 7. Modulul Filesystem anulează suportul implicit pentru S3, OSS, COS, Minio

pentru a reduce încărcarea de trei ambalaje inutile, pentru a reduce volumul pachetelor și pentru a îmbunătăți eficiența compilării;
Goravel va arunca treptat fiecare șofer de modul într-un pachet independent de expansiune. În acest upgrade, modulul
`Filesystem` anulează suportul implicit pentru `S3`, `OSS`, `COS`, `Minio` driverele şi transferă suport pentru
pachete independente de extensie.

Elimină cheile din `config/filesystems.go::disks` cu excepția `local` și driverele care folosesc:

```go
// Modificat
"disks": map[string]any{
  "local": harta[string]orice {
    "driver": "local",
    "rădăcină": "stocaj/app",
    "url": config. nv("APP_URL", "").(string) + "/storage",
  },
},
```

Dacă folosiți alți șoferi vă așteptați la `local`, vă rugăm să consultați documentația corespunzătoare pentru instalare:

| Șofer | Link-ul                                                                                              |
| ----- | ---------------------------------------------------------------------------------------------------- |
| S3    | [https://github.com/goravel/s3](https://github.com/goravel/s3)       |
| OSS   | [https://github.com/goravel/oss](https://github.com/goravel/oss)     |
| COS   | [https://github.com/goravel/cos](https://github.com/goravel/cos)     |
| Minio | [https://github.com/goravel/minio](https://github.com/goravel/minio) |

### 8. Modulul de cache anulează suportul implicit pentru Redis

Elimină cheia `redis` din `config/cache.go::stores` dacă nu o folosești:

```go
// Modificat
"stocuri": map[string]any{
  "memorie": hartă[string]oric{
    "driver": "memorie",
  },
},
```

Dacă folosiți șoferul `redis`, vă rugăm să consultați documentația șoferului `redis` pentru instalare:

| Șofer | Link-ul                                                                                              |
| ----- | ---------------------------------------------------------------------------------------------------- |
| Redis | [https://github.com/goravel/redis](https://github.com/goravel/redis) |

### 9. Schimbă tipul de creatAt, Actualizat În Model(Dacă folosești)

Pentru a face timpul să scrie mai mult standard în rezultatul API, tipul de `CreatedAt`, `UpdatedAt` în `Model` modificare la
`carbon.DateTime` din `time.Time`. Dacă aveți o procesare suplimentară pentru aceste două câmpuri, puteți obține tipul original
`time.Time` prin metoda `CreatedAt.ToStdTime()`.

### 10. Optimizează regula modulului de validare (dacă se folosește)

Verificați valoarea zero în regula originală de validare, de exemplu, dacă regula este setată la `dată` și `required` nu este setată,
și câmpul este gol sau nu este trecut, modulul de validare va solicita că este necesar un câmp. După optimizare, modulul de validare
va trece de verificare, care este mai intuitiv de utilizat. Dacă utilizați validarea relevantă, vă rugăm
să vă asigurați că actualizarea este cea așteptată.

### 11. Instalează din nou dependențe

Rulați `go mod tidy`

## Introducere funcţie

### Container serviciu

Versiune: v1.12.0

Toate serviciile din Goravel sunt înregistrate în containerul serviciului, oferind un sprijin puternic pentru dezvoltarea pachetului
, [Pentru detaliu](../foundation/container)

### Pachet Dezvoltare

Versiune: v1.12.0

Pachetele sunt modul principal de a adăuga funcționalitate la Goravel, poate îmbogăți ecologia lui
Goravel, [Pentru Detalii](../advanced/package)

### Artizan de pavilion adaugă metode noi

Versiune: v1.12.0

Adăugați metode pentru modulul Artizan pentru a obține diferite tipuri de
`Flag`, [Pentru Detalii](../advanced/artisan#options)

### Adaugă metode de ajutor

Versiune: v1.12.0

Adaugă metode de Heldere: `cale" și `carbon\`, poți obține cu ușurință informații despre traseu și să tratezi timpul în proiectul
, [Pentru detaliu](../advanced/helpers).

### Actualizare Dependențe

Versiune: v1.12.0

Pentru a oferi suport mai bun pentru caracteristici, versiunile tuturor pachetelor de care depinde Goravel au fost actualizate.

### Migrare adauga metode noi

Versiune: v1.12.0

| Comenzi                           | Acțiune                                                    |
| --------------------------------- | ---------------------------------------------------------- |
| migrează:fresh    | Renunțați la toate tabelele și reexecutați toate migrările |
| migrează:refresh  | Resetați și reexecutați toate migrările                    |
| migrează:resetare | Retromite toate migrările bazei de date                    |
| migrează:status   | Arată starea fiecărei migrări                              |

### Unele subdirectoare de suport pentru comenzi `make`

Versiune: v1.12.0

| 命令                                                         | 生成文件                                                                              |
| ---------------------------------------------------------- | --------------------------------------------------------------------------------- |
| march:policy User/AuthPolicy               | app/policies/User/auth_policy.go             |
| make:command Goravel/CleanCache            | app/consolă/comandă/Goravel/clean_cache.go   |
| march:model Utilizator/Telefon             | app/modele/User/phone.go                                          |
| march:observer User/PhoneObserver          | app/observatori/User/phone_observer.go       |
| march:event User/GoravelEvent              | app/events/User/goravel_event.go             |
| make:listener User/GoravelListen           | app/listeners/User/goravel_listen.go         |
| march:controller Utilizator/AuthController | app/http/controllers/User/auth_controller.go |
| make:middleware Utilizator/Auth            | app/http/middleware/User/auth.go                                  |
| march:request User/Auth                    | app/http/requests/User/auth.go                                    |
| march:job Goravel/Job                      | app/jobs/Goravel/job.go                                           |
| mke:rule Utilizator/Telefon                | app/reguli/User/phone.go                                          |

### Problema de panică cauzată de calea fișierelor în Windows

Versiune: v1.12.1

Repară problema de panică cauzată de backslash atunci când comanda `make` creează automat foldere sub Windows.

### Problema fațades.Gate() Revenire nulă

Versiune: v1.12.2

Remediați problema `facades.Gate()` returnează nil.

### Problema de facere:package Command Under Windows

Versiunea: v1.12.3

Fișierul creat prin comanda `make:package` are o cale greșită în Windows.

### Problema cu panica de Aruncare Middleware Tropicală

Versiune: v1.12.4

Remediați problema panicii de lansare a middleware-ului de accelerare.

### Repară problema facades.Orm().Query().Load()

Versiune: v1.12,5

Remediați problema că `facades.Orm().Query().Load()` nu poate încărca corect modelul în unele cazuri.

### Repară problema JWT

Versiune: v1.12.6

Remediați problema că atunci când JWT Token este expirat și invalid, eroarea de expirare este returnată, iar eroarea
este așteptată să fie returnată primul.
