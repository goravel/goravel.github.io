# Actualizare la v1.10 De la v1.9

## Funcții noi sunt incredibile 🎉

- [Add facades.Crypt(1.10.0)](#encryption)
- [Add facades.Hash(1.10.0)](#hashing)
- [Add Rate Limiting for Routing(1.10.0)](#add-rate-limiting-for-routing)

## Îmbunătățiri 🚀

- [Actualizare la v1.10 De la v1.9](#upgrading-to-v110-from-v19)
  - [Excitare Caracteristici noi 🎉](#exciting-new-features-)
  - [Îmbunătățiri 🚀](#enhancements-)
  - [Ruperea modificărilor 🛠️](#breaking-changes-)
  - [Ghid de actualizare](#upgrade-guide)
    - [Actualizare dependențe](#updating-dependencies)
    - [Encryption](#encryption)
    - [Hashing](#hashing)
    - [Add Rate Limiting for Routing](#add-rate-limiting-for-routing)
    - [Optimizare mod de pornire HTTP](#optimize-http-startup-mode)
    - [Optimizare mod de pornire GRPC](#optimize-grpc-startup-mode)
    - [Add configuration to control log output to console](#add-configuration-to-control-log-output-to-console)
    - [Request modify and add methods](#request-modify-and-add-methods)
    - Suport de așteptare întârziat expediere](#queue-support-delayed-dispatching)
    - [Conexiunea în ORM suportă prefixul tabelului setat și singular](#the-connection-in-orm-supports-set-table-prefix-and-singular)
    - [Add docker-compose.yml file](#add-docker-composeyml-file)
    - [Optimizare orm](#optimize-orm)
    - [Suportă multiple SQL în fișierul de migrare](#support-multiple-sql-in-migration-file)
    - [Add minio driver for File Storage](#add-minio-driver-for-file-storage)
    - [contracts/http add status mapping of net/http](#contractshttp-add-status-mapping-of-nethttp)
    - [APP\_KEY necesare](#app_key-required)
    - [Adăugare parametru ctx la metodele din formularul de cerere](#add-ctx-parameter-to-the-methods-under-form-request)
    - [facades.Auth.Parse add payload returns](#facadesauthparse-add-payload-returns)
    - [Unele metode de Orm adaugă noi valori de returnare](#some-methods-of-orm-add-new-return-values)

## Ruperea modificărilor 🛠️

- [APP_KEY necesar (1.10.0)](#app-key-required)
- [Add ctx parameter to the methods under formular Request(1.10.0)](#add-ctx-parameter-to-the-methods-under-form-request)
- [facades.Auth.Parse adaugă payload returns(1.10.0)](#facades-auth-parse-add-payload-returns)
- [Unele metode de Orm adaugă noi valori de returnare (1.10.0)](#some-methods-of-orm-add-new-return-values)

## Ghid de actualizare

**Timp estimat de actualizare: 20 de minute**

### Actualizarea dependentelor

Actualizează dependențele în fișierul `go.mod`:

```
go get -u github.com/goravel/framework@v1.10.0 && go mod tidy
```

### Criptare

Versiune: v1.10.0

Adaugă `facades.Crypt`:

1. adaugă `&crypt.ServiceProvider{}` la elementul `furnizori` din secțiunea
  [config/app.go](https://github.com/goravel/goravel/blob/v1.10.x/config/app.go) fișierului;

[Pentru detaliu](../security/encryption)

### Hashing

Versiune: v1.10.0

Adaugă `facades.Hash`:

1. adăugați `&hash.ServiceProvider{}` la elementul `furnizori` din secțiunea
  [config/app.go](https://github.com/goravel/goravel/blob/v1.10.x/config/app.go) fișierului;

2. Adaugă fișierul [config/hashing.go](https://github.com/goravel/goravel/blob/v1.10.x/config/hashing.go);

[Pentru detaliu](../security/hashing)

### Adaugă rată de limitare pentru rutare

Versiune: v1.10.0

[Pentru detaliu](../basic/routing#Rate-Limiting)

### Optimizare mod de pornire HTTP

Versiune: v1.10.0

1. Adăugați configurația `config/http.go`, [Pentru detalii](https://github.com/goravel/goravel/blob/v1.10.x/config/http.go);
2. Metoda `facades.Route.Run` nu mai are nevoie să treacă parametrii, implicit folosește `http.host` și `http.port`(tu
  nu trebuie să modifici codul, este compatibil cu backward);
3. Metoda `facades.Route.RunTLS` nu mai are nevoie să treacă parametrii, utilizați implicit `http.tls.host`,
  `http. ls.port`, `http.tls.ssl.cert` şi `http.tls.ssl.key`, dacă îl folosiţi, trebuie să modificaţi codul;
4. Adăugați metoda `facades.Route.RunTLSWithCert`, [Pentru detalii](../basic/routing#start-server);
5. Mutaţi `app.url`, `app.host` în `http.url`, \`http.host';

### Optimizare mod de pornire GRPC

Versiune: v1.10.0

The `facades.Grpc.Run` method no longer needs to pass parameters, by default use `grpc.host` and `grpc.port`(you don't
need to modify the code, it's backward compatible);

### Adăugaţi configuraţia pentru a controla intrarea log-urilor în consolă

Versiune: v1.10.0

Adăugaţi configuraţia `print` la `single`, canalul `ziy` în fişierul `config/logging.go`, poate controla log-ul la consola
, [Pentru detaliu](https://github.com/goravel/goravel/blob/v1.10.x/config/logging.go);

### Solicitare modificare și adăugare metode

Versiune: v1.10.0

1. Metoda `Input` este schimbată de la obținerea doar a parametrilor de rutare la obținerea datelor în conformitate cu următoarea ordine:
  `json`, `form`, `query`, `route`ouncNotă: `json` poate obţine doar date unidimensionale, în caz contrar se va returna gol;
2. Adăugați metoda `Route` pentru a înlocui metoda originală `Input`;
3. Valoarea implicită a metodelor `Query` şi `Form` sunt modificate pentru a fi inutilă;
4. Adaugă metode după cum se arată mai jos:

| Metodă     | Acțiune                                                                                              |
| ---------- | ---------------------------------------------------------------------------------------------------- |
| Ruta       | [Preluarea unei valori a rutei](../basic/requests#Retrieving-An-Input-Value)                         |
| RuteInt    | [Preluarea unei valori a rutei](../basic/requests#Retrieving-An-Input-Value)                         |
| RutăInt64  | [Preluarea unei valori a rutei](../basic/requests#Retrieving-An-Input-Value)                         |
| QueryInt   | [Preluare intrare din șirul de interogări](../basic/requests#Retrieving-Input-From-The-Query-String) |
| Queringă64 | [Preluare intrare din șirul de interogări](../basic/requests#Retrieving-Input-From-The-Query-String) |
| QueryBool  | [Preluare intrare din șirul de interogări](../basic/requests#Retrieving-Input-From-The-Query-String) |
| InputInt   | [Preluarea unei valori de intrare](../basic/requests#Retrieving-An-Input-Value)                      |
| InputInt64 | [Preluarea unei valori de intrare](../basic/requests#Retrieving-An-Input-Value)                      |
| InputBool  | [Preluarea unei valori de intrare](../basic/requests#Retrieving-An-Input-Value)                      |
| Json       | [Preluarea Json](../basic/requests#Retrieving-Json)                                                  |

### Suport pentru așteptare întârziat expedierea

Versiune: v1.10.0

Adaugă metoda `Delay`, [Pentru Detalii](../advanced/queues#Delayed-Dispatching)

### Conexiunea în ORM suportă prefixul tabelului setat și singular

Versiune: v1.10.0

1. `Model` suportă numele tabelului specificat, [Pentru detalii](../orm/quickstart);
2. Adăugați chei noi la `connection` din `config/database.go`:

`prefix`: Setează prefixul pentru numele tabelelor;
`singular`: Setează numele tabelului pentru a utiliza singular sau plural;

[Pentru detaliu](https://github.com/goravel/goravel/blob/v1.10.x/config/database.go)

### Adăugați fișierul docker-compose.yml

Versiune: v1.10.0

Puteți porni rapid serviciul cu următoarea comandă:

```
compunere docker-compose
docker-compose
```

### Optimizează Orm

Versiune: v1.10.0

1. Se adaugă următoarele metode:

| Funcții             | Acțiune                                                    |
| ------------------- | ---------------------------------------------------------- |
| Primul              | [Query or return data through callback](#Query-one-line)   |
| FirstOrNew          | [Preluarea sau noi modele](#Retrieving-Or-Creating-Models) |
| FirstOrFail         | [Eroare negăsită](#Not-Found-Error)                        |
| ActualizareOrCreare | [Actualizare sau creare](#Update-or-create)                |

2. A fost raportată o astfel de eroare înainte, dar acum este acceptată:

```go
interogare := facades.Orm.Query()
interogare = query.Where()
```

### Suporta multiple SQL in fisierul de migrare

Versiune: v1.10.0

Anterior, o singură declarație SQL era acceptată în dosarul migrației, dar acum sunt susținute mai multe declarații.

### Adaugă minio șofer pentru stocarea fișierelor

Versiune: v1.10.0

Adaugă minio configurație, [pentru detalii](https://github.com/goravel/goravel/blob/v1.10.x/config/filesystems.go).

### contracte/http adaugă status maping net/http

Versiune: v1.10.0

Puteţi folosi coduri de stare cum ar fi `http.StatusOK` direct în controller fără a importa `net/http`.

[Pentru detaliu](https://github.com/goravel/framework/blob/v1.10.0/contracts/http/status.go)

### KEY necesar

Versiune: v1.10.0

`APP_KEY` din fişierul `.env` este schimbat la necesar şi poţi executa comanda pentru a genera APP_KEY:
\`go run . cheie artizanală:generate".

### Adaugă parametrul ctx la metodele de la formularul de cerere

Versiune: v1.10.0

Adăugaţi parametrul `ctx http.Context` la metodele din formularul de cerere: `Rules`, `Messages`, `Attributes`,
`PrepareForValidation`, vă permite să faceţi mai multe configuraţii personalizate.

[Pentru detaliu](../basic/validation#creating-form-requests)

### fațades.Auth.Parse add payload return

Versiune: v1.10.0

`err := facades.Auth.Parse(ctx, token)` modifică `payload, err := facades.Auth.Parse(ctx, token)`, prin `payload`
poți obține:

1. `Guard`: Garda curentă;
2. `Cheie`: Steagul utilizatorului;
3. `ExpireAt`: Timp de expirare;
4. `EmedAt`: Timp eliberat;

[Pentru detaliu](../security/authentication#parse-token)

### Unele metode de Orm adaugă noi valori de returnare

Versiune: v1.10.0

Următoarele metode adaugă valoarea `*Rezult` returnează pentru a obține numărul de rânduri afectate:

```go
res, err := query.Delete(&user)
res, err := query.Exec(fmt.Sprintf [DELETE DIN utilizatori unde id = %d", user.ID)]
res, err := interogare. orceDelete(&User{})
res, err := query.Updates(User{Avatar: "avatar"})

// Rânduri afectate
num := res.RowsAfected
```
