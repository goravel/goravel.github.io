# Actualizare la v1.13 De la v1.12

### FuncÈ›ii noi sunt incredibile ğŸ‰

- [Seeding](#seeding)
- [Factories](#factories)
- [Testing](#testing)
- [Views](#views)

## ÃmbunÄƒtÄƒÈ›iri ğŸš€

- [ActualizeazÄƒ versiunea implicitÄƒ a Golang la 1.20](#upgrade-the-default-version-of-golang-to-1-20)
- [Task Scheduling Suports Scale Horizontal](#schedule-supports-scale-horizontally)
- [Add Debug Methods](#add-debug-methods)
- [parametru de comandÄƒ:controller Adds Parametru](#make-controller-command-adds-parameter)
- [Add Status Method for Response](#add-status-method-for-response)
- [Add Sum and Cursor Methods for Orm](#add-sum-and-cursor-methods-for-orm)
- [Modulul de suport al rutei configureazÄƒ È™oferul](#the-route-module-supports-configure-driver)
- [Add InputArray and InputMap Methods for Request](#add-inputarray-and-inputmap-methods-for-request)
- [Modelul de Om SuportÄƒ Conexiune PersonalizatÄƒ](#the-model-of-orm-supports-custom-connection)
- [Add Cloudinary Driver for Filesystem](#add-cloudinary-driver-for-filesystem)
- [Add New Chain Methods for Log](#add-new-chain-methods-for-log)

### v1.13.4

- [Serviciul Startup SuportÄƒ Variabile de Mediu](#the-service-startup-supports-environment-variables)

## Ruperea modificÄƒrilor ğŸ› ï¸

- [Remove the Global HTTP Middleware Loaded by Implicault](#_5-remove-the-global-http-middleware-loaded-by-default)
- [OptimizaÈ›i returnarea controlerului](#_6-optimize-the-return-of-controller)
- [Change the parameter of the group Method in facades.Route()](#_7-change-the-parameter-of-the-group-method-in-facades-route)
- [Optimizare AminteÈ™te-È›i È™i AminteÈ™te-È›i metodele pentru totdeauna Ã®n faÈ›ade.Cache()(DacÄƒ foloseÈ™ti)](#_8-optimize-remember-and-rememberforever-methods-in-facades-cache-if-using)
- [ModificÄƒ numele pachetului de acces.NewAllowResponse È™i access.NewDenyResponse(DacÄƒ utilizezi)](#_9-change-the-package-name-of-access-newallowresponse-and-access-newdenyresponse-if-using)
- [Remove Deprecated Methods(If using)](#_10-remove-deprecated-methods-if-using)

### Probleme rezolvate ğŸ›

- [Fix facades.Auth().User()](#fix-facades-auth-user)
- [RemediaÈ›i calea .env personalizatÄƒ nu are efect Ã®n unele cazuri](#fix-custom-env-path-does-not-take-effect-in-some-cases)
- [Fix Token ExpirÄƒ imediat cÃ¢nd ttl == 0 este setat Ã®n JWT](#fix-token-expires-immediately-when-ttl-0-is-set-in-jwt)

#### v1.13.2

- [Fix facades.Storage().Url() Returns Wrong Path under Windows](#fix-facades-storage-url-returns-wrong-path-under-windows)
- [Remediere conexiune anormalÄƒ atunci cÃ¢nd parola PosteazÄƒ este goalÄƒ](#fix-abnormal-connection-when-the-postgres-password-is-empty)
- [Remedierea metodei cu este invalidÄƒ atunci cÃ¢nd se utilizeazÄƒ metoda de cursor de orm](#fix-the-with-method-is-invalid-when-using-the-cursor-method-of-orm)

#### v1.13.4

- [Fix The Validation Module Cant Verify The Rute Params](#fix-the-validation-module-cant-verify-the-route-params)
- [ReparÄƒ fiÈ™ierul Fiber Driver Cant Returnare](#fix-the-fiber-driver-cant-return-file)
- [Fix the Global Middleware Of Fiber Driver Panic](#fix-the-global-middleware-of-fiber-driver-panic)
- [Fix The ContentType Setting of Fiber Driver is different from Gin Driver](#fix-the-contenttype-setting-of-fiber-driver-is-different-from-gin-driver)

#### v1.13.5

- [ReparÄƒ conexiunea modelului nu funcÈ›ioneazÄƒ](#fix-the-connection-of-model-does-not-work)
- [Fix The Error of Mock Log](#fix-the-error-of-mock-log)

#### v1.13.6 v1.13.7

- [ReparÄƒ problema execuÈ›iei neliniare a lanÈ›ului de interogÄƒri](#fix-the-problem-of-nonlinear-execution-of-query-chain)

#### v1.13.8

- [RemediaÈ›i problema faÈ›ades.Auth().Parse()](#fix-the-problem-of-facades-auth-parse)
- [ReparÄƒ problema facades.Orm().WithContext()](#fix-the-problem-of-facades-orm-withcontext)
- [Coada este controlatÄƒ de APP_DEBUG](#the-queue-log-is-controlled-by-app-debug)

#### v1.13.9

- [Repararea problemei legate de noua printare a jurnalului este incorectÄƒ](#fix-the-problem-of-the-new-line-print-of-log-is-incorrect)
- [ReparÄƒ problema vÃ¢nzÄƒtorului:publish Commabnd Cannot Publish Directory](#fix-the-problem-of-the-vendor-publish-commabnd-can-not-publish-directory)

### v1.13.10

- [ReparÄƒ traseele nu sunt È™terse cÃ¢nd se apeleazÄƒ Log.Info dupÄƒ log.Error](#fix-the-traces-do-not-cleaned-when-calling-log-info-after-log-error)
- [Fix The Gettribute of Orm Event Returns Error Data](#fix-the-getattribute-of-orm-event-returns-error-data)
- [Add ToSql, ToRawSql Methods for ORM](#add-tosql-torawsql-methods-for-orm)

## Ghid de actualizare

VÄƒ rugÄƒm sÄƒ actualizaÈ›i framework-ul pas cu pas Ã®n funcÈ›ie de conÈ›inutul din aceastÄƒ secÈ›iune.

**Timp estimat de actualizare: 10 minute**

### 1. Actualizarea dependentelor

ActualizeazÄƒ dependenÈ›ele Ã®n fiÈ™ierul `go.mod`:

```
mergi sÄƒ primeÈ™ti -u github.com/goravel/framework@v1.13.9 && mergi sÄƒ primeÈ™ti -u github.com/goravel/gin
```

### 2. AdaugÄƒ fiÈ™iere noi

[tests](https://github.com/goravel/goravel/tree/v1.13.x/tests)

[database/seeders/database_seeder.go](https://github.com/goravel/goravel/tree/v1.13.x/database/seeders/database_seeder.go)

[app/providers/database_service_provider.go](https://github.com/goravel/goravel/tree/v1.13.x/app/providers/database_service_provider.go)

### 3. ÃnregistreazÄƒ furnizori noi

NotaÈ›i comanda:

```go
import (
  "github.com/goravel/framework/testing"
  "github.com/goravel/gin"
)

// config/app. o
"furnizori": []foundation.ServiceProvider{
  ...
  &validation.ServiceProvider{},
  // New
  &testing. erviceProvider{}, 
  &providers.AppServiceFurnizor{},
  ...
  &furnizori. alidationServiceProvider{},
  // New
  &providers.DatabaseServiceProvider{}, 
  // New
  â‰¥ in.ServiceProvider{}, 
}
```

### 4. AdaugÄƒ Configurare

ModificaÈ›i [config/http.go](https://github.com/goravel/goravel/tree/v1.13.x/config/http.go)

```go
import (
  "github.com/goravel/framework/contracts/route"
  "github.com/goravel/framework/facades"
  ginfacades "github.com/goravel/gin/facades"
)

config. dd("http", map[string]any{
  // HTTP Driver
  "default": "gin",
  // HTTP Drivers
  "drivers": harta[string]any{
    "gin": harta[string]any{
      "route": func() (rutÄƒ. Ã®n afarÄƒ, eroare) {
        return ginfacades. oute("gin"), nil
      },
    },
  },
  . .
}
```

ModificaÈ›i [config/cors.go](https://github.com/goravel/goravel/tree/v1.13.x/config/cors.go)

```go
config.Add("cors", harta[string]any{
  ...
  // New
  "cals": []string{"*"}, 
  "allowed_methods": []string{"*"},
  ...
}
```

### 5. È˜terge implicit HTTP Middleware-ul global Ã®ncÄƒrcat

1. Middleware-ul `tls` È™i `cors` au fost integrate Ã®n È™oferul HTTP implicit, prin urmare, `middleware. ors()` È™i
  `middleware.Tls()` Ã®n fiÈ™ierul `app/http/kernel.go` trebuie sÄƒ fie È™terse.

2. The `facades.Route().GlobalMiddleware(http.Kernel{}.Middleware()...)` method in the
  `app/providers/route_service_provider.go` file moves to `Boot` from `Register`:

```go
furnizorii de pachete

...

type RouteServiceProvider struct {
}

func (destinatar *RouteServiceProvider) Register(fundaÈ›ia aplicaÈ›iei. pplication) {
}

func (receptor *RouteServiceProvider) Boot(app fundation. pplication) {
  ///Add HTTP middleware
  facades.Route().GlobalMiddleware(http.Kernel{}.Middleware()...)

  onfigureRateLimiting()

  routes.Web()
}

func (receptor *RouteServiceProvider) configureRateLimiting() {

}
```

### 6. OptimizeazÄƒ returnarea controlerului

`Controller` adaugÄƒ valoarea return `http.Response`, `ctx.Response()` poate fi returnat direct, nu este nevoie sÄƒ utilizaÅ£i
`return` separat pentru a face logica mai uÅŸoarÄƒ.

```go
// Ãnainte de
func (r *UserController) Show(ctx http.Context) {
  ctx.Response().Success().Json(http. son{
    "Salut": "Goravel",
  })
  return
}

// DupÄƒ
func (r *UserController) Show(ctx http. ontext) http.Response {
  return ctx.Response().Success().Json(http.Json{
    "Salut": "Goravel",
  })
}
```

### 7. ModificÄƒ parametrul metodei de grup Ã®n faÈ›ades.Route()

SchimbaÈ›i `route.Route` Ã®n `route.Router`ï¼š

```go
// Ãnainte de
faades.Route().Group(funcÈ›ie (rutÄƒ.Route)

// DupÄƒ
faades.Route().Group(funcÈ›ie (rutÄƒ.Router)
```

### 8. OptimizeazÄƒ Memento È™i AminteÈ™te-È›i Metode pentru totdeauna Ã®n faÈ›ade.Cache()(DacÄƒ foloseÈ™ti)

Tipul de `callback` se modificÄƒ Ã®n `func() (any, error)` din `func() ori`:

```go
// Ãnainte de
AminteÈ™te-È›i (È™irul cheie, tonul de timp. urcare, funcÈ›ie de apel invers () orice) (orice, eroare)
RememberForever(È™ir cheie, funcÈ›ie callback () orice) (any, eroare)

// DupÄƒ
AminteÈ™te-È›i (È™irul cheie, tasta ttl time. uraÅ£ie, funcÅ£ie de apel invers () (any, eroare)) (any, eroare)
RememberForever(key string, function callback () (any, error)) (any, eroare)
```

### 9. SchimbaÈ›i numele pachetului de acces.NewAllowResponse È™i access.NewDenyResponse(DacÄƒ utilizaÈ›i)

SchimbaÈ›i `/contracts/auth/access` Ã®n `/auth/access`:

```go
// Before
import "github.com/goravel/framework/contracts/auth/access"

access.NewAllowResponse()
access.NewDenyResponse()

// After
import "github.com/goravel/framework/auth/access"

access.NewAllowResponse()
access.NewDenyResponse()
```

### 10. EliminÄƒ Metode Ã®nvechite (DacÄƒ utilizezi)

1. EliminaÅ£i metodele `ctx.Request().Form()` ÅŸi `ctx.Request().Json()`, utilizaÅ£i metoda `ctx.Request().Input()`;

2. EliminaÈ›i `GetLevel`, `GetTime`, metodele `GetMessage` ale `Log` driver personalizat, folosiÈ›i Ã®n schimb `Level`, `Time`, metodele `Message`

3. EliminaÈ›i metoda `gorm.New`, metoda este folositÄƒ pentru a obÈ›ine instanÈ›a `gorm` direct, nu mai este recomandatÄƒ.
  dacÄƒ este necesar, folosiÈ›i Ã®n schimb metoda \`gorm.NewGormImpl";

## Introducere funcÅ£ie

### Seeding

Versiune: v1.13.1

[Pentru detaliu](../orm/seeding)

### Fabrici

Versiune: v1.13.1

[Pentru detaliu](../orm/factories)

### Testare

Versiune: v1.13.1

[Pentru detaliu](../testing/quickstart)

### VizualizÄƒri

Versiune: v1.13.1

[Pentru detaliu](../basic/views)

### ActualizeazÄƒ versiunea implicitÄƒ de Golang la 1.20

Versiune: v1.13.1

Golang 1.18 È™i 1.19 au fost Ã®ntrerupte È™i cadrul a fost actualizat la 1.20
Ã®n consecinÈ›Äƒ, [pentru detaliu](https://endoflife.date/go). DacÄƒ doriÅ£i sÄƒ continuaÅ£i sÄƒ utilizaÅ£i 1.18 sau 1.19, doar modificaÅ£i numÄƒrul versiunii
Ã®n `go.mod`, acestea sunt complet compatibile Ã®n prezent.

### Scala Scala Sarcini de Suportare orizontal

Versiune: v1.13.1

[Pentru detaliu](../advanced/schedule#running-tasks-on-one-server)

### AdaugÄƒ metode de depanare

Versiune: v1.13.1

[Pentru detaliu](../advanced/helpers#debug)

### parametru de adÄƒugare la comandÄƒ:controller

Versiune: v1.13.1

Comanda `make:controller` adaugÄƒ parametrul `--resource`, CURD a fost creat cu uÈ™urinÈ›Äƒ:

```
mergi sÄƒ rulezi . artizan:controller --resource Controller
```

### AdaugÄƒ Status pentru RÄƒspuns

Versiune: v1.13.1

[Pentru detaliu](../basic/responses#custom-code)

### AdaugÄƒ metode de SumÄƒ È™i Cursor pentru Orm

Versiune: v1.13.1

[Pentru detaliu](../orm/quickstart#facades-orm-query-facades-orm-transaction-available-functions)

### Suporta modul Rute pentru configurarea È™oferului

Versiune: v1.13.1

SeparaÈ›i modulul original implicit Gin al rutei Ã®ntr-un pachet, acesta poate fi injectat Ã®n Goravel prin configurarea
. dupÄƒ aceastÄƒ optimizare, furnizaÈ›i un canal convenabil pentru injectarea altor pachete HTTP Ã®n Goravel,
Ã®n prezent douÄƒ pachete HTTP sunt oficial acceptate:

| È˜ofer | Link-ul                                                                                              |
| ----- | ---------------------------------------------------------------------------------------------------- |
| Gin   | [https://github.com/goravel/gin](https://github.com/goravel/gin)     |
| FibrÄƒ | [https://github.com/goravel/fiber](https://github.com/goravel/fiber) |

### AdaugÄƒ InputArray È™i Metode InputMap pentru Cerere

Versiune: v1.13.1

[Pentru detaliu](../basic/requests#retrieving-an-input-value)

### Modelul de Orm suportÄƒ o conexiune personalizatÄƒ

Versiune: v1.13.1

[Pentru detaliu](../orm/quickstart#database-connections)

### AdaugÄƒ È˜ofer Cloudinar pentru sistemul de fiÈ™iere

Versiune: v1.13.1

[Pentru detaliu](https://github.com/goravel/cloudinary)

### AdaugÄƒ metode noi de lanÈ› pentru jurnal

Versiune: v1.13.1

[Pentru detaliu](../basic/logging#chain-methods)

### ReparÄƒ faÈ›ades.Auth().User()

Versiune: v1.13.1

1. RemediaÈ›i problema cÄƒ nicio eroare nu aruncÄƒ Ã®n cazul Ã®n care utilizatorul nu a existat atunci cÃ¢nd a folosit metoda 'facades.Auth().User(ctx, &user)'

2. RemediaÈ›i problema cÄƒ `utilizatorul` poate fi gÄƒsit atunci cÃ¢nd cheia primarÄƒ nu este \`inte';

### RemediaÈ›i calea particularizatÄƒ .env Ã®n unele cazuri

Versiune: v1.13.1

RemediaÈ›i problema cÄƒ calea personalizatÄƒ .env nu are efect Ã®n unele cazuri.

### Remediere Token-ul expirÄƒ imediat cÃ¢nd ttl == 0 este setat Ã®n JWT

Versiune: v1.13.1

AÈ™teptaÈ›i ca jetonul sÄƒ nu expire niciodatÄƒ cÃ¢nd `ttl == 0`.

### ReparÄƒ faÈ›ades.Storage().Url() Calea greÈ™ealÄƒ Returns Sub Windows

Versiune: v1.13.2

[Problema #263](https://github.com/goravel/goravel/issues/263)

### ReparÄƒ conexiunea anormalÄƒ atunci cÃ¢nd parola posteazÄƒ este goalÄƒ

Versiune: v1.13.2

[Problema #270](https://github.com/goravel/goravel/issues/270)

### ReparÄƒ metoda cu este invalidÄƒ cÃ¢nd se foloseÈ™te metoda Cursor de orm

Versiune: v1.13.2

[Problema #253](https://github.com/goravel/goravel/issues/253)

### Serviciul Startup sprijinÄƒ variabile de mediu

Versiune: v1.13.4

[Problema #265](https://github.com/goravel/goravel/issues/265)

### ReparÄƒ modulul de validare Cant Verify Ruta Parametri

goravel/gin: v1.1.6

goravel/fiber: v1.1.11

[Problema #294](https://github.com/goravel/goravel/issues/294)

### ReparÄƒ fiÈ™ierul Fiber Driver Cant Returnare

goravel/fiber: v1.1.11

[Problema #299](https://github.com/goravel/goravel/issues/299)

### ReparÄƒ panica globalÄƒ Middleware of Fiber Driver

goravel/fiber: v1.1.11

[Problema #300](https://github.com/goravel/goravel/issues/300)

### ReparÄƒ Setarea ContentType de Fiber Driver este diferitÄƒ de la È™ofer Gin

goravel/fiber: v1.1.11

[Problema #296](https://github.com/goravel/goravel/issues/296)

### ReparÄƒ modelul de conectare care nu funcÈ›ioneazÄƒ

goravel/framework: v1.13.5

[Problema #312](https://github.com/goravel/goravel/issues/312)

### ReparÄƒ eroarea Mock Log

goravel/framework: v1.13.5

[Problema #320](https://github.com/goravel/goravel/issues/320)

### ReparÄƒ problema execuÈ›iei neliniare a lanÈ›ului de interogÄƒri

goravel/cadru: v1.13.6 v1.13.7

[Problema #341](https://github.com/goravel/goravel/issues/341)

### ReparÄƒ problema faÈ›ades.Auth().Parse()

goravel/framework: v1.13.8

[Problema #388](https://github.com/goravel/goravel/issues/388)

### ReparÄƒ problema facades.Orm().WithContext()

goravel/framework: v1.13.8

[Problema #390](https://github.com/goravel/goravel/issues/390)

### Coada este controlatÄƒ de APP_DEBUG

goravel/framework: v1.13.8

Nivelurile `Debug` ÅŸi `Info` nu vor fi tipÄƒrite atunci cÃ¢nd `APP_DEBUG=false`

[Problema #389](https://github.com/goravel/goravel/issues/389)

### ReparÄƒ problema noii printÄƒri a unui nou jurnal este incorectÄƒ

goravel/framework: v1.13.9

[Problema #395](https://github.com/goravel/goravel/issues/395)

### ReparÄƒ problema vÃ¢nzÄƒtorului:publish Commabnd Nu poate publica Directorul

goravel/framework: v1.13.9

[Problema #345](https://github.com/goravel/goravel/issues/345)

### ReparÄƒ traseele nu sunt È™terse cÃ¢nd se apeleazÄƒ log-ul.Info dupÄƒ log.Error

goravel/framework: v1.13.10

[Problema #402](https://github.com/goravel/goravel/issues/402)

### ReparÄƒ datele de eroare obÈ›inere atribut al evenimentului de retur de erori

goravel/framework: v1.13.10

[Problema #405](https://github.com/goravel/goravel/issues/405)

### Adauga ToSql, Metode ToRawSql pentru ORM

goravel/framework: v1.13.10

[Problema #411](https://github.com/goravel/goravel/issues/411)
