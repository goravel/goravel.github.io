# Actualizare la v1.13 De la v1.12

### Funcții noi sunt incredibile 🎉

- [Seeding](#seeding)
- [Factories](#factories)
- [Testing](#testing)
- [Views](#views)

## Îmbunătățiri 🚀

- [Actualizează versiunea implicită a Golang la 1.20](#upgrade-the-default-version-of-golang-to-1-20)
- [Task Scheduling Suports Scale Horizontal](#schedule-supports-scale-horizontally)
- [Add Debug Methods](#add-debug-methods)
- [parametru de comandă:controller Adds Parametru](#make-controller-command-adds-parameter)
- [Add Status Method for Response](#add-status-method-for-response)
- [Add Sum and Cursor Methods for Orm](#add-sum-and-cursor-methods-for-orm)
- [Modulul de suport al rutei configurează șoferul](#the-route-module-supports-configure-driver)
- [Add InputArray and InputMap Methods for Request](#add-inputarray-and-inputmap-methods-for-request)
- [Modelul de Om Suportă Conexiune Personalizată](#the-model-of-orm-supports-custom-connection)
- [Add Cloudinary Driver for Filesystem](#add-cloudinary-driver-for-filesystem)
- [Add New Chain Methods for Log](#add-new-chain-methods-for-log)

### v1.13.4

- [Serviciul Startup Suportă Variabile de Mediu](#the-service-startup-supports-environment-variables)

## Ruperea modificărilor 🛠️

- [Remove the Global HTTP Middleware Loaded by Implicault](#_5-remove-the-global-http-middleware-loaded-by-default)
- [Optimizați returnarea controlerului](#_6-optimize-the-return-of-controller)
- [Change the parameter of the group Method in facades.Route()](#_7-change-the-parameter-of-the-group-method-in-facades-route)
- [Optimizare Amintește-ți și Amintește-ți metodele pentru totdeauna în fațade.Cache()(Dacă folosești)](#_8-optimize-remember-and-rememberforever-methods-in-facades-cache-if-using)
- [Modifică numele pachetului de acces.NewAllowResponse și access.NewDenyResponse(Dacă utilizezi)](#_9-change-the-package-name-of-access-newallowresponse-and-access-newdenyresponse-if-using)
- [Remove Deprecated Methods(If using)](#_10-remove-deprecated-methods-if-using)

### Probleme rezolvate 🐛

- [Fix facades.Auth().User()](#fix-facades-auth-user)
- [Remediați calea .env personalizată nu are efect în unele cazuri](#fix-custom-env-path-does-not-take-effect-in-some-cases)
- [Fix Token Expiră imediat când ttl == 0 este setat în JWT](#fix-token-expires-immediately-when-ttl-0-is-set-in-jwt)

#### v1.13.2

- [Fix facades.Storage().Url() Returns Wrong Path under Windows](#fix-facades-storage-url-returns-wrong-path-under-windows)
- [Remediere conexiune anormală atunci când parola Postează este goală](#fix-abnormal-connection-when-the-postgres-password-is-empty)
- [Remedierea metodei cu este invalidă atunci când se utilizează metoda de cursor de orm](#fix-the-with-method-is-invalid-when-using-the-cursor-method-of-orm)

#### v1.13.4

- [Fix The Validation Module Cant Verify The Rute Params](#fix-the-validation-module-cant-verify-the-route-params)
- [Repară fișierul Fiber Driver Cant Returnare](#fix-the-fiber-driver-cant-return-file)
- [Fix the Global Middleware Of Fiber Driver Panic](#fix-the-global-middleware-of-fiber-driver-panic)
- [Fix The ContentType Setting of Fiber Driver is different from Gin Driver](#fix-the-contenttype-setting-of-fiber-driver-is-different-from-gin-driver)

#### v1.13.5

- [Repară conexiunea modelului nu funcționează](#fix-the-connection-of-model-does-not-work)
- [Fix The Error of Mock Log](#fix-the-error-of-mock-log)

#### v1.13.6 v1.13.7

- [Repară problema execuției neliniare a lanțului de interogări](#fix-the-problem-of-nonlinear-execution-of-query-chain)

#### v1.13.8

- [Remediați problema fațades.Auth().Parse()](#fix-the-problem-of-facades-auth-parse)
- [Repară problema facades.Orm().WithContext()](#fix-the-problem-of-facades-orm-withcontext)
- [Coada este controlată de APP_DEBUG](#the-queue-log-is-controlled-by-app-debug)

#### v1.13.9

- [Repararea problemei legate de noua printare a jurnalului este incorectă](#fix-the-problem-of-the-new-line-print-of-log-is-incorrect)
- [Repară problema vânzătorului:publish Commabnd Cannot Publish Directory](#fix-the-problem-of-the-vendor-publish-commabnd-can-not-publish-directory)

### v1.13.10

- [Repară traseele nu sunt șterse când se apelează Log.Info după log.Error](#fix-the-traces-do-not-cleaned-when-calling-log-info-after-log-error)
- [Fix The Gettribute of Orm Event Returns Error Data](#fix-the-getattribute-of-orm-event-returns-error-data)
- [Add ToSql, ToRawSql Methods for ORM](#add-tosql-torawsql-methods-for-orm)

## Ghid de actualizare

Vă rugăm să actualizați framework-ul pas cu pas în funcție de conținutul din această secțiune.

**Timp estimat de actualizare: 10 minute**

### 1. Actualizarea dependentelor

Actualizează dependențele în fișierul `go.mod`:

```
mergi să primești -u github.com/goravel/framework@v1.13.9 && mergi să primești -u github.com/goravel/gin
```

### 2. Adaugă fișiere noi

[tests](https://github.com/goravel/goravel/tree/v1.13.x/tests)

[database/seeders/database_seeder.go](https://github.com/goravel/goravel/tree/v1.13.x/database/seeders/database_seeder.go)

[app/providers/database_service_provider.go](https://github.com/goravel/goravel/tree/v1.13.x/app/providers/database_service_provider.go)

### 3. Înregistrează furnizori noi

Notați comanda:

```go
import (
  "github.com/goravel/framework/testing"
  "github.com/goravel/gin"
)

// config/app. o
"furnizori": []foundation.ServiceProvider{
  ...
  &validation.ServiceProvider{},
  // New
  &testing. erviceProvider{}, 
  &providers.AppServiceFurnizor{},
  ...
  &furnizori. alidationServiceProvider{},
  // New
  &providers.DatabaseServiceProvider{}, 
  // New
  ≥ in.ServiceProvider{}, 
}
```

### 4. Adaugă Configurare

Modificați [config/http.go](https://github.com/goravel/goravel/tree/v1.13.x/config/http.go)

```go
import (
  "github.com/goravel/framework/contracts/route"
  "github.com/goravel/framework/facades"
  ginfacades "github.com/goravel/gin/facades"
)

config. dd("http", map[string]any{
  // HTTP Driver
  "default": "gin",
  // HTTP Drivers
  "drivers": harta[string]any{
    "gin": harta[string]any{
      "route": func() (rută. în afară, eroare) {
        return ginfacades. oute("gin"), nil
      },
    },
  },
  . .
}
```

Modificați [config/cors.go](https://github.com/goravel/goravel/tree/v1.13.x/config/cors.go)

```go
config.Add("cors", harta[string]any{
  ...
  // New
  "cals": []string{"*"}, 
  "allowed_methods": []string{"*"},
  ...
}
```

### 5. Șterge implicit HTTP Middleware-ul global încărcat

1. Middleware-ul `tls` și `cors` au fost integrate în șoferul HTTP implicit, prin urmare, `middleware. ors()` și
  `middleware.Tls()` în fișierul `app/http/kernel.go` trebuie să fie șterse.

2. The `facades.Route().GlobalMiddleware(http.Kernel{}.Middleware()...)` method in the
  `app/providers/route_service_provider.go` file moves to `Boot` from `Register`:

```go
furnizorii de pachete

...

type RouteServiceProvider struct {
}

func (destinatar *RouteServiceProvider) Register(fundația aplicației. pplication) {
}

func (receptor *RouteServiceProvider) Boot(app fundation. pplication) {
  ///Add HTTP middleware
  facades.Route().GlobalMiddleware(http.Kernel{}.Middleware()...)

  onfigureRateLimiting()

  routes.Web()
}

func (receptor *RouteServiceProvider) configureRateLimiting() {

}
```

### 6. Optimizează returnarea controlerului

`Controller` adaugă valoarea return `http.Response`, `ctx.Response()` poate fi returnat direct, nu este nevoie să utilizaţi
`return` separat pentru a face logica mai uşoară.

```go
// Înainte de
func (r *UserController) Show(ctx http.Context) {
  ctx.Response().Success().Json(http. son{
    "Salut": "Goravel",
  })
  return
}

// După
func (r *UserController) Show(ctx http. ontext) http.Response {
  return ctx.Response().Success().Json(http.Json{
    "Salut": "Goravel",
  })
}
```

### 7. Modifică parametrul metodei de grup în fațades.Route()

Schimbați `route.Route` în `route.Router`：

```go
// Înainte de
faades.Route().Group(funcție (rută.Route)

// După
faades.Route().Group(funcție (rută.Router)
```

### 8. Optimizează Memento și Amintește-ți Metode pentru totdeauna în fațade.Cache()(Dacă folosești)

Tipul de `callback` se modifică în `func() (any, error)` din `func() ori`:

```go
// Înainte de
Amintește-ți (șirul cheie, tonul de timp. urcare, funcție de apel invers () orice) (orice, eroare)
RememberForever(șir cheie, funcție callback () orice) (any, eroare)

// După
Amintește-ți (șirul cheie, tasta ttl time. uraţie, funcţie de apel invers () (any, eroare)) (any, eroare)
RememberForever(key string, function callback () (any, error)) (any, eroare)
```

### 9. Schimbați numele pachetului de acces.NewAllowResponse și access.NewDenyResponse(Dacă utilizați)

Schimbați `/contracts/auth/access` în `/auth/access`:

```go
// Before
import "github.com/goravel/framework/contracts/auth/access"

access.NewAllowResponse()
access.NewDenyResponse()

// After
import "github.com/goravel/framework/auth/access"

access.NewAllowResponse()
access.NewDenyResponse()
```

### 10. Elimină Metode învechite (Dacă utilizezi)

1. Eliminaţi metodele `ctx.Request().Form()` şi `ctx.Request().Json()`, utilizaţi metoda `ctx.Request().Input()`;

2. Eliminați `GetLevel`, `GetTime`, metodele `GetMessage` ale `Log` driver personalizat, folosiți în schimb `Level`, `Time`, metodele `Message`

3. Eliminați metoda `gorm.New`, metoda este folosită pentru a obține instanța `gorm` direct, nu mai este recomandată.
  dacă este necesar, folosiți în schimb metoda \`gorm.NewGormImpl";

## Introducere funcţie

### Seeding

Versiune: v1.13.1

[Pentru detaliu](../orm/seeding)

### Fabrici

Versiune: v1.13.1

[Pentru detaliu](../orm/factories)

### Testare

Versiune: v1.13.1

[Pentru detaliu](../testing/quickstart)

### Vizualizări

Versiune: v1.13.1

[Pentru detaliu](../basic/views)

### Actualizează versiunea implicită de Golang la 1.20

Versiune: v1.13.1

Golang 1.18 și 1.19 au fost întrerupte și cadrul a fost actualizat la 1.20
în consecință, [pentru detaliu](https://endoflife.date/go). Dacă doriţi să continuaţi să utilizaţi 1.18 sau 1.19, doar modificaţi numărul versiunii
în `go.mod`, acestea sunt complet compatibile în prezent.

### Scala Scala Sarcini de Suportare orizontal

Versiune: v1.13.1

[Pentru detaliu](../advanced/schedule#running-tasks-on-one-server)

### Adaugă metode de depanare

Versiune: v1.13.1

[Pentru detaliu](../advanced/helpers#debug)

### parametru de adăugare la comandă:controller

Versiune: v1.13.1

Comanda `make:controller` adaugă parametrul `--resource`, CURD a fost creat cu ușurință:

```
mergi să rulezi . artizan:controller --resource Controller
```

### Adaugă Status pentru Răspuns

Versiune: v1.13.1

[Pentru detaliu](../basic/responses#custom-code)

### Adaugă metode de Sumă și Cursor pentru Orm

Versiune: v1.13.1

[Pentru detaliu](../orm/quickstart#facades-orm-query-facades-orm-transaction-available-functions)

### Suporta modul Rute pentru configurarea șoferului

Versiune: v1.13.1

Separați modulul original implicit Gin al rutei într-un pachet, acesta poate fi injectat în Goravel prin configurarea
. după această optimizare, furnizați un canal convenabil pentru injectarea altor pachete HTTP în Goravel,
în prezent două pachete HTTP sunt oficial acceptate:

| Șofer | Link-ul                                                                                              |
| ----- | ---------------------------------------------------------------------------------------------------- |
| Gin   | [https://github.com/goravel/gin](https://github.com/goravel/gin)     |
| Fibră | [https://github.com/goravel/fiber](https://github.com/goravel/fiber) |

### Adaugă InputArray și Metode InputMap pentru Cerere

Versiune: v1.13.1

[Pentru detaliu](../basic/requests#retrieving-an-input-value)

### Modelul de Orm suportă o conexiune personalizată

Versiune: v1.13.1

[Pentru detaliu](../orm/quickstart#database-connections)

### Adaugă Șofer Cloudinar pentru sistemul de fișiere

Versiune: v1.13.1

[Pentru detaliu](https://github.com/goravel/cloudinary)

### Adaugă metode noi de lanț pentru jurnal

Versiune: v1.13.1

[Pentru detaliu](../basic/logging#chain-methods)

### Repară fațades.Auth().User()

Versiune: v1.13.1

1. Remediați problema că nicio eroare nu aruncă în cazul în care utilizatorul nu a existat atunci când a folosit metoda 'facades.Auth().User(ctx, &user)'

2. Remediați problema că `utilizatorul` poate fi găsit atunci când cheia primară nu este \`inte';

### Remediați calea particularizată .env în unele cazuri

Versiune: v1.13.1

Remediați problema că calea personalizată .env nu are efect în unele cazuri.

### Remediere Token-ul expiră imediat când ttl == 0 este setat în JWT

Versiune: v1.13.1

Așteptați ca jetonul să nu expire niciodată când `ttl == 0`.

### Repară fațades.Storage().Url() Calea greșeală Returns Sub Windows

Versiune: v1.13.2

[Problema #263](https://github.com/goravel/goravel/issues/263)

### Repară conexiunea anormală atunci când parola postează este goală

Versiune: v1.13.2

[Problema #270](https://github.com/goravel/goravel/issues/270)

### Repară metoda cu este invalidă când se folosește metoda Cursor de orm

Versiune: v1.13.2

[Problema #253](https://github.com/goravel/goravel/issues/253)

### Serviciul Startup sprijină variabile de mediu

Versiune: v1.13.4

[Problema #265](https://github.com/goravel/goravel/issues/265)

### Repară modulul de validare Cant Verify Ruta Parametri

goravel/gin: v1.1.6

goravel/fiber: v1.1.11

[Problema #294](https://github.com/goravel/goravel/issues/294)

### Repară fișierul Fiber Driver Cant Returnare

goravel/fiber: v1.1.11

[Problema #299](https://github.com/goravel/goravel/issues/299)

### Repară panica globală Middleware of Fiber Driver

goravel/fiber: v1.1.11

[Problema #300](https://github.com/goravel/goravel/issues/300)

### Repară Setarea ContentType de Fiber Driver este diferită de la șofer Gin

goravel/fiber: v1.1.11

[Problema #296](https://github.com/goravel/goravel/issues/296)

### Repară modelul de conectare care nu funcționează

goravel/framework: v1.13.5

[Problema #312](https://github.com/goravel/goravel/issues/312)

### Repară eroarea Mock Log

goravel/framework: v1.13.5

[Problema #320](https://github.com/goravel/goravel/issues/320)

### Repară problema execuției neliniare a lanțului de interogări

goravel/cadru: v1.13.6 v1.13.7

[Problema #341](https://github.com/goravel/goravel/issues/341)

### Repară problema fațades.Auth().Parse()

goravel/framework: v1.13.8

[Problema #388](https://github.com/goravel/goravel/issues/388)

### Repară problema facades.Orm().WithContext()

goravel/framework: v1.13.8

[Problema #390](https://github.com/goravel/goravel/issues/390)

### Coada este controlată de APP_DEBUG

goravel/framework: v1.13.8

Nivelurile `Debug` şi `Info` nu vor fi tipărite atunci când `APP_DEBUG=false`

[Problema #389](https://github.com/goravel/goravel/issues/389)

### Repară problema noii printări a unui nou jurnal este incorectă

goravel/framework: v1.13.9

[Problema #395](https://github.com/goravel/goravel/issues/395)

### Repară problema vânzătorului:publish Commabnd Nu poate publica Directorul

goravel/framework: v1.13.9

[Problema #345](https://github.com/goravel/goravel/issues/345)

### Repară traseele nu sunt șterse când se apelează log-ul.Info după log.Error

goravel/framework: v1.13.10

[Problema #402](https://github.com/goravel/goravel/issues/402)

### Repară datele de eroare obținere atribut al evenimentului de retur de erori

goravel/framework: v1.13.10

[Problema #405](https://github.com/goravel/goravel/issues/405)

### Adauga ToSql, Metode ToRawSql pentru ORM

goravel/framework: v1.13.10

[Problema #411](https://github.com/goravel/goravel/issues/411)
